import"../chunks/DsnmJJEf.js";import{i as Ge}from"../chunks/BQ5TAxPT.js";import{o as He}from"../chunks/Dpb-i6uF.js";import{p as Ne,f as g,h as ze,t as E,j as Q,a as y,b as We,$ as Je,s as d,c as i,g as c,m as Y,r,n as ae,i as f,e as h,x as Re,d as Ce,T as Pe}from"../chunks/CVry2a8L.js";import{i as O}from"../chunks/Cgd3HNF2.js";import{e as fe,i as ge}from"../chunks/DUfWvYOm.js";import{r as Oe,b as Ve,s as Xe}from"../chunks/DXEbly8j.js";import{s as xe}from"../chunks/CtW1WcXw.js";class se{static instance;config;cache=new Map;requestCount=0;lastResetTime=Date.now();constructor(e){this.config=e}static getInstance(e){if(!se.instance){if(!e)throw new Error("SofaScoreAdapter requires configuration on first initialization");se.instance=new se(e)}return se.instance}async search(e,t="all",a=0){const s=`search_${e}_${t}_${a}`,o=this.getFromCache(s);if(o)return o;await this.checkRateLimit();const n=`${this.config.baseUrl}/search?q=${encodeURIComponent(e)}&type=${t}&page=${a}`,l=await this.makeRequest(n);return this.setCache(s,l),l}async getPlayer(e){const t=`player_${e}`,a=this.getFromCache(t);if(a)return a;await this.checkRateLimit();const s=`${this.config.baseUrl}/player/${e}`,o=await this.makeRequest(s);return this.setCache(t,o),o}async getTeam(e){const t=`team_${e}`,a=this.getFromCache(t);if(a)return a;await this.checkRateLimit();const s=`${this.config.baseUrl}/team/${e}`,o=await this.makeRequest(s);return this.setCache(t,o),o}async getMatchesByDate(e){const t=e.toISOString().split("T")[0],a=`matches_${t}`,s=this.getFromCache(a);if(s)return s;await this.checkRateLimit();const o=`${this.config.baseUrl}/sport/football/scheduled-events/${t}`,n=await this.makeRequest(o);return this.setCache(a,n.events||[]),n.events||[]}async getLiveMatches(){const e="live_matches",t=this.getFromCache(e,3e4);if(t)return t;await this.checkRateLimit();const a=`${this.config.baseUrl}/sport/football/events/live`,s=await this.makeRequest(a);return this.setCache(e,s.events||[],3e4),s.events||[]}convertToFeedMatch(e){const t=new Date(e.startTimestamp*1e3),a=this.mapMatchStatus(e.status.code);return{id:`sofa_${e.id}`,matchId:`sofa_${e.id}`,league:e.tournament.name,home:e.homeTeam.name,away:e.awayTeam.name,homeTeam:e.homeTeam.name,awayTeam:e.awayTeam.name,homeTeamLogo:`/logos/sofa_${e.homeTeam.id}.png`,awayTeamLogo:`/logos/sofa_${e.awayTeam.id}.png`,kickoff:t,startTime:t,status:a,popularity:Math.min(100,Math.floor(e.homeTeam.userCount/1e4)),source:"SofaScore",lastUpdated:new Date,venue:`${e.homeTeam.name} Stadium`,lineupStatus:"probable",curationState:"feed_only",auditTrail:[],players:[]}}convertToFeedPlayer(e,t){const a=this.mapPlayerPosition(e.position),s=this.calculatePlayerCredits(e,a);return{id:`sofa_${e.id}`,matchId:t,name:e.name,team:e.team?.name||"Unknown",position:this.mapPositionCode(a),role:a,credits:s,points:0,selectedBy:Math.random()*100,isPlaying:!0,meta:{injuryStatus:"fit",form:Math.random()*10,value:Math.floor(Math.random()*5e7)+1e6}}}async getPopularPlayers(e=20){const t=["messi","ronaldo","mbappe","haaland","neymar","salah","kane","benzema"],a=[];for(const s of t.slice(0,Math.ceil(e/t.length)))try{const n=(await this.search(s,"player",0)).results.filter(l=>l.type==="player").slice(0,3).map(l=>this.convertToFeedPlayer(l.entity,"popular"));a.push(...n)}catch(o){console.warn(`Failed to fetch players for query: ${s}`,o)}return a.slice(0,e)}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,hitRate:0}}async makeRequest(e){try{const t=await fetch(e,{headers:{"X-RapidAPI-Host":"sofascore.p.rapidapi.com","X-RapidAPI-Key":this.config.apiKey,"Content-Type":"application/json"},method:"GET"});if(!t.ok){const a=await t.text();throw console.error(`RapidAPI SofaScore error: ${t.status} ${t.statusText}`,a),new Error(`RapidAPI SofaScore error: ${t.status} ${t.statusText}`)}return t.json()}catch(t){throw console.error("RapidAPI request failed:",t),t}}async checkRateLimit(){const e=Date.now(),t=e-this.lastResetTime;if(t>=6e4&&(this.requestCount=0,this.lastResetTime=e),this.requestCount>=this.config.rateLimit){const a=6e4-t;await new Promise(s=>setTimeout(s,a)),this.requestCount=0,this.lastResetTime=Date.now()}this.requestCount++}getFromCache(e,t){const a=this.cache.get(e);return a&&a.expires>Date.now()?a.data:(a&&this.cache.delete(e),null)}setCache(e,t,a){const s=a||this.config.cacheTtl;this.cache.set(e,{data:t,expires:Date.now()+s})}mapMatchStatus(e){return e===0?"upcoming":e>=1&&e<=6?"live":"completed"}mapPlayerPosition(e){if(!e)return"midfielder";const t=e.toLowerCase();return t.includes("g")||t.includes("keeper")?"goalkeeper":t.includes("d")||t.includes("def")?"defender":t.includes("f")||t.includes("forward")||t.includes("striker")?"forward":"midfielder"}mapPositionCode(e){switch(e){case"goalkeeper":return"GK";case"defender":return"DEF";case"midfielder":return"MID";case"forward":return"FWD";default:return"MID"}}calculatePlayerCredits(e,t){const a={goalkeeper:5,defender:6,midfielder:7,forward:8},s=Math.min(2,1+e.userCount/1e6);return Math.round(a[t]*s*10)/10}}const Qe={apiKey:"23eba5e004mshdb855f7e2e9c0c3p13cd89jsn53631ff75549",baseUrl:"https://sofascore.p.rapidapi.com",rateLimit:100,cacheTtl:3e5},Z=se.getInstance(Qe);class re{static instance;mockMatches=[];mockPlayers=[];constructor(){this.initializeMockData()}static getInstance(){return re.instance||(re.instance=new re),re.instance}async listUpcoming(e,t){return await new Promise(a=>setTimeout(a,200)),this.mockMatches.filter(a=>a.kickoff>=e&&a.kickoff<=t&&a.status==="upcoming")}async getMatch(e){return await new Promise(t=>setTimeout(t,100)),this.mockMatches.find(t=>t.matchId===e)||null}async getPlayers(e){return await new Promise(t=>setTimeout(t,150)),this.mockPlayers.filter(t=>t.matchId===e)}updateCurationState(e,t,a){const s=this.mockMatches.find(o=>o.matchId===e);if(s){const o=s.curationState;s.curationState=t,s.lastUpdated=new Date,s.auditTrail.push({id:crypto.randomUUID(),who:a,what:`Changed curation state from ${o} to ${t}`,entity:"match",before:{curationState:o},after:{curationState:t},when:new Date}),this.saveCurationState()}}bulkUpdateCuration(e,t,a){e.forEach(s=>{this.updateCurationState(s,t,a)})}async refreshFeed(){await new Promise(e=>setTimeout(e,1e3)),this.mockMatches.forEach(e=>{e.lastUpdated=new Date,e.popularity=Math.max(0,Math.min(100,e.popularity+(Math.random()-.5)*10))})}initializeMockData(){this.loadCurationState(),this.mockMatches.length===0&&this.generateMockMatches()}generateMockMatches(){const e=["EPL","LALIGA","UCL","BUNDESLIGA","SERIE_A","LIGUE_1"],t={EPL:["Arsenal","Chelsea","Liverpool","Man City","Man United","Tottenham"],LALIGA:["Real Madrid","Barcelona","Atletico Madrid","Sevilla","Valencia","Villarreal"],UCL:["Bayern Munich","PSG","Juventus","AC Milan","Inter Milan","Dortmund"],BUNDESLIGA:["Bayern Munich","Dortmund","RB Leipzig","Bayer Leverkusen","Wolfsburg","Frankfurt"],SERIE_A:["Juventus","AC Milan","Inter Milan","Napoli","Roma","Lazio"],LIGUE_1:["PSG","Marseille","Lyon","Monaco","Nice","Lille"]},a=new Date;for(let s=0;s<50;s++){const o=e[Math.floor(Math.random()*e.length)],n=t[o],l=n[Math.floor(Math.random()*n.length)];let u=n[Math.floor(Math.random()*n.length)];for(;u===l;)u=n[Math.floor(Math.random()*n.length)];const R=new Date(a.getTime()+Math.random()*7*24*60*60*1e3),te=Math.floor(Math.random()*100),ne=["EPL","LALIGA","UCL"].includes(o)&&te>70,oe={id:`match_${s+1}`,matchId:`feed_${Date.now()}_${s}`,league:o,home:l,away:u,homeTeam:l,awayTeam:u,homeTeamLogo:`/logos/${l.toLowerCase().replace(" ","_")}.png`,awayTeamLogo:`/logos/${u.toLowerCase().replace(" ","_")}.png`,kickoff:R,startTime:R,status:"upcoming",popularity:te,source:"MockFeed",lastUpdated:new Date,venue:`${l} Stadium`,lineupStatus:Math.random()>.3?"confirmed":"probable",odds:{home:1.5+Math.random()*2,draw:3+Math.random()*2,away:1.5+Math.random()*2},curationState:ne?"curated":"feed_only",auditTrail:[],players:[]};this.mockMatches.push(oe),this.generatePlayersForMatch(oe.matchId,l,u)}}generatePlayersForMatch(e,t,a){const s=["goalkeeper","defender","midfielder","forward"],o={goalkeeper:2,defender:8,midfielder:8,forward:6};[t,a].forEach(n=>{s.forEach(l=>{for(let u=0;u<o[l];u++){const R={id:`${e}_${n}_${l}_${u}`,matchId:e,name:`${n} ${l} ${u+1}`,team:n,position:l==="goalkeeper"?"GK":l==="defender"?"DEF":l==="midfielder"?"MID":"FWD",role:l,credits:l==="goalkeeper"?5+Math.random()*3:l==="defender"?6+Math.random()*4:l==="midfielder"?7+Math.random()*5:8+Math.random()*6,points:0,selectedBy:Math.random()*100,isPlaying:Math.random()>.1,meta:{injuryStatus:Math.random()>.8?"doubtful":"fit",form:Math.random()*10,value:1e6+Math.random()*5e7}};this.mockPlayers.push(R)}})})}saveCurationState(){if(typeof localStorage<"u"){const e=this.mockMatches.map(t=>({matchId:t.matchId,curationState:t.curationState,auditTrail:t.auditTrail}));localStorage.setItem("picknwin_curation_state",JSON.stringify(e))}}loadCurationState(){if(typeof localStorage<"u"){const e=localStorage.getItem("picknwin_curation_state");if(e){const t=JSON.parse(e);this.applySavedCurationStates=t}}}applySavedCurationStates=[]}const be=re.getInstance();class ie{static instance;config;stats;cache=new Map;constructor(e={}){this.config={primarySource:"hybrid",fallbackEnabled:!0,cacheEnabled:!0,maxRetries:3,timeoutMs:1e4,...e},this.stats={totalRequests:0,mockRequests:0,sofascoreRequests:0,cacheHits:0,cacheMisses:0,errorCount:0,averageResponseTime:0}}static getInstance(e){return ie.instance||(ie.instance=new ie(e)),ie.instance}async getUpcomingMatches(e,t){const a=Date.now();this.stats.totalRequests++;try{const s=`upcoming_${e.getTime()}_${t.getTime()}`;if(this.config.cacheEnabled){const n=this.getFromCache(s);if(n)return this.stats.cacheHits++,this.updateResponseTime(a),n;this.stats.cacheMisses++}let o=[];switch(this.config.primarySource){case"mock":o=await this.getMockMatches(e,t);break;case"sofascore":o=await this.getSofaScoreMatches(e,t);break;case"hybrid":o=await this.getHybridMatches(e,t);break}return this.config.cacheEnabled&&o.length>0&&this.setCache(s,o,3e5),this.updateResponseTime(a),o}catch(s){if(this.handleError(s),this.updateResponseTime(a),this.config.fallbackEnabled&&this.config.primarySource!=="mock")return console.warn("Falling back to mock data due to error:",s),this.getMockMatches(e,t);throw s}}async getMatchPlayers(e){const t=Date.now();this.stats.totalRequests++;try{const a=`players_${e}`;if(this.config.cacheEnabled){const o=this.getFromCache(a);if(o)return this.stats.cacheHits++,this.updateResponseTime(t),o;this.stats.cacheMisses++}let s=[];return e.startsWith("sofa_")?s=await this.getSofaScorePlayers(e):s=await this.getMockPlayers(e),this.config.cacheEnabled&&s.length>0&&this.setCache(a,s,6e5),this.updateResponseTime(t),s}catch(a){if(this.handleError(a),this.updateResponseTime(t),this.config.fallbackEnabled)return console.warn("Falling back to mock players due to error:",a),this.getMockPlayers(e);throw a}}async searchPlayers(e,t=20){const a=Date.now();this.stats.totalRequests++;try{const s=`search_${e}_${t}`;if(this.config.cacheEnabled){const n=this.getFromCache(s);if(n)return this.stats.cacheHits++,this.updateResponseTime(a),n;this.stats.cacheMisses++}let o=[];if(this.config.primarySource!=="mock")try{o=(await Z.search(e,"player")).results.filter(l=>l.type==="player").slice(0,t).map(l=>this.enhanceSofaScorePlayer(Z.convertToFeedPlayer(l.entity,"search"))),this.stats.sofascoreRequests++}catch(n){console.warn("SofaScore search failed, using mock data:",n)}if(o.length<t){const n=await this.searchMockPlayers(e,t-o.length);o.push(...n)}return this.config.cacheEnabled&&o.length>0&&this.setCache(s,o,6e5),this.updateResponseTime(a),o}catch(s){throw this.handleError(s),this.updateResponseTime(a),s}}async getLiveMatches(){const e=Date.now();this.stats.totalRequests++;try{const t="live_matches",a=this.getFromCache(t,3e4);if(a)return this.stats.cacheHits++,this.updateResponseTime(e),a;this.stats.cacheMisses++;let s=[];if(this.config.primarySource!=="mock")try{s=(await Z.getLiveMatches()).map(n=>this.enhanceSofaScoreMatch(Z.convertToFeedMatch(n))),this.stats.sofascoreRequests++}catch(o){console.warn("SofaScore live matches failed:",o)}return this.config.cacheEnabled&&s.length>0&&this.setCache(t,s,3e4),this.updateResponseTime(e),s}catch(t){return this.handleError(t),this.updateResponseTime(e),[]}}updateConfig(e){this.config={...this.config,...e},e.cacheEnabled||this.cache.clear()}getStats(){return{...this.stats}}clearCache(){this.cache.clear(),Z.clearCache()}resetStats(){this.stats={totalRequests:0,mockRequests:0,sofascoreRequests:0,cacheHits:0,cacheMisses:0,errorCount:0,averageResponseTime:0}}async getMockMatches(e,t){return this.stats.mockRequests++,(await be.listUpcoming(e,t)).map(s=>this.enhanceMockMatch(s))}async getSofaScoreMatches(e,t){this.stats.sofascoreRequests++;const a=[],s=new Date(e);for(;s<=t;){try{const n=(await Z.getMatchesByDate(s)).map(l=>this.enhanceSofaScoreMatch(Z.convertToFeedMatch(l)));a.push(...n)}catch(o){console.warn(`Failed to get matches for ${s.toISOString()}:`,o)}s.setDate(s.getDate()+1)}return a}async getHybridMatches(e,t){const[a,s]=await Promise.allSettled([this.getMockMatches(e,t),this.getSofaScoreMatches(e,t)]),o=[];if(s.status==="fulfilled"&&o.push(...s.value),a.status==="fulfilled"){const n=a.value.filter(l=>!o.some(u=>this.matchesAreSimilar(l,u)));o.push(...n)}return o.sort((n,l)=>n.kickoff.getTime()-l.kickoff.getTime())}async getMockPlayers(e){return this.stats.mockRequests++,(await be.getPlayers(e)).map(a=>this.enhanceMockPlayer(a))}async getSofaScorePlayers(e){return this.stats.sofascoreRequests++,[]}async searchMockPlayers(e,t){return this.stats.mockRequests++,(await be.getPlayers("mock_search")).filter(o=>o.name.toLowerCase().includes(e.toLowerCase())).slice(0,t).map(o=>this.enhanceMockPlayer(o))}enhanceMockMatch(e){return{...e,dataSource:"mock",confidenceScore:85,lastSyncTime:new Date}}enhanceSofaScoreMatch(e){return{...e,dataSource:"sofascore",confidenceScore:95,lastSyncTime:new Date}}enhanceMockPlayer(e){return{...e,dataSource:"mock",confidenceScore:80,lastSyncTime:new Date}}enhanceSofaScorePlayer(e){return{...e,dataSource:"sofascore",confidenceScore:95,lastSyncTime:new Date}}matchesAreSimilar(e,t){const a=Math.abs(e.kickoff.getTime()-t.kickoff.getTime());return(e.home===t.home&&e.away===t.away||e.home===t.away&&e.away===t.home)&&a<36e5}getFromCache(e,t){const a=this.cache.get(e);return a&&a.expires>Date.now()?a.data:(a&&this.cache.delete(e),null)}setCache(e,t,a){this.cache.set(e,{data:t,expires:Date.now()+a,source:this.config.primarySource})}handleError(e){this.stats.errorCount++,this.stats.lastError=e.message,this.stats.lastErrorTime=new Date,console.error("UnifiedFeedService error:",e)}updateResponseTime(e){const t=Date.now()-e;this.stats.averageResponseTime=(this.stats.averageResponseTime*(this.stats.totalRequests-1)+t)/this.stats.totalRequests}}const ce=ie.getInstance({primarySource:"hybrid",fallbackEnabled:!0,cacheEnabled:!0,maxRetries:3,timeoutMs:1e4});var Ye=g('<meta name="description" content="Demo of SofaScore API integration for real sports data" class="svelte-tdy242"/>'),Ze=g('<span class="text-red-600 svelte-tdy242"> </span>'),et=g('<div class="mt-4 p-3 bg-red-50 border border-red-200 rounded svelte-tdy242"><div class="text-sm text-red-800 svelte-tdy242"><strong class="svelte-tdy242">Last Error:</strong> <!></div></div>'),tt=g('<div class="bg-white rounded-lg shadow-md p-6 mb-8 svelte-tdy242"><div class="flex justify-between items-center mb-4 svelte-tdy242"><h2 class="text-xl font-semibold text-gray-800 svelte-tdy242">Service Statistics</h2> <div class="space-x-2 svelte-tdy242"><button class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 svelte-tdy242">Refresh</button> <button class="px-3 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-600 svelte-tdy242">Clear Cache</button> <button class="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 svelte-tdy242">Reset Stats</button></div></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 svelte-tdy242"><div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-blue-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">Total Requests</div></div> <div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-green-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">Cache Hits</div></div> <div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-orange-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">SofaScore API</div></div> <div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-purple-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">Avg Response</div></div></div> <!></div>'),at=g('<div class="flex items-center space-x-3 svelte-tdy242"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center svelte-tdy242"><span class="text-blue-600 font-semibold text-lg svelte-tdy242">⚽</span></div> <div class="flex-1 svelte-tdy242"><h4 class="font-semibold text-gray-900 svelte-tdy242"> </h4> <p class="text-sm text-gray-600 svelte-tdy242"> </p> <p class="text-xs text-gray-500 svelte-tdy242"> </p> <div class="flex items-center space-x-2 mt-1 svelte-tdy242"><span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded svelte-tdy242">Player</span> <span class="text-xs text-gray-500 svelte-tdy242"> </span></div></div></div>'),st=g('<div class="flex items-center space-x-3 svelte-tdy242"><div class="w-12 h-12 rounded-full flex items-center justify-center svelte-tdy242"><span class="text-white font-semibold text-sm svelte-tdy242"> </span></div> <div class="flex-1 svelte-tdy242"><h4 class="font-semibold text-gray-900 svelte-tdy242"> </h4> <p class="text-sm text-gray-600 svelte-tdy242"> </p> <div class="flex items-center space-x-2 mt-1 svelte-tdy242"><span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded svelte-tdy242">Team</span> <span class="text-xs text-gray-500 svelte-tdy242"> </span></div></div></div>'),rt=g('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-tdy242"><!></div>'),it=g('<div class="space-y-4 svelte-tdy242"><h3 class="text-lg font-semibold text-gray-800 svelte-tdy242"> </h3> <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 svelte-tdy242"></div></div>'),ot=g('<div class="space-y-6 svelte-tdy242"><div class="flex space-x-4 svelte-tdy242"><input placeholder="Search for players or teams..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-tdy242"/> <button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed svelte-tdy242"> </button></div> <!></div>'),ct=g('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-tdy242"><div class="flex justify-between items-center mb-2 svelte-tdy242"><span class="text-sm font-medium text-gray-600 svelte-tdy242"> </span> <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full animate-pulse svelte-tdy242">🔴 LIVE</span></div> <div class="flex justify-between items-center svelte-tdy242"><div class="text-center flex-1 svelte-tdy242"><div class="font-semibold text-gray-900 svelte-tdy242"> </div></div> <div class="text-center px-4 svelte-tdy242"><div class="text-lg font-bold text-gray-800 svelte-tdy242">VS</div></div> <div class="text-center flex-1 svelte-tdy242"><div class="font-semibold text-gray-900 svelte-tdy242"> </div></div></div> <div class="mt-3 flex justify-between items-center text-sm text-gray-600 svelte-tdy242"><span class="svelte-tdy242"> </span> <span class="svelte-tdy242"> </span></div></div>'),nt=g('<div class="grid gap-4 md:grid-cols-2 svelte-tdy242"></div>'),lt=g('<div class="text-center py-8 text-gray-500 svelte-tdy242"><div class="text-4xl mb-2 svelte-tdy242">⚽</div> <p class="svelte-tdy242">No live matches found</p> <p class="text-sm svelte-tdy242">Check back later or try refreshing</p></div>'),dt=g('<div class="space-y-6 svelte-tdy242"><div class="flex justify-between items-center svelte-tdy242"><h3 class="text-lg font-semibold text-gray-800 svelte-tdy242">Live Matches</h3> <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 svelte-tdy242"> </button></div> <!></div>'),vt=g('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-tdy242"><div class="flex items-center space-x-3 svelte-tdy242"><div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center svelte-tdy242"><span class="text-white font-semibold text-lg svelte-tdy242">⭐</span></div> <div class="flex-1 svelte-tdy242"><h4 class="font-semibold text-gray-900 svelte-tdy242"> </h4> <p class="text-sm text-gray-600 svelte-tdy242"> </p> <div class="flex items-center justify-between mt-2 svelte-tdy242"><span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded svelte-tdy242"> </span> <span class="text-sm font-semibold text-green-600 svelte-tdy242"> </span></div> <div class="flex items-center justify-between mt-1 text-xs text-gray-500 svelte-tdy242"><span class="svelte-tdy242"> </span> <span class="svelte-tdy242"> </span></div></div></div></div>'),ht=g('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 svelte-tdy242"></div>'),ut=g('<div class="text-center py-8 text-gray-500 svelte-tdy242"><div class="text-4xl mb-2 svelte-tdy242">👥</div> <p class="svelte-tdy242">No popular players loaded</p> <p class="text-sm svelte-tdy242">Click refresh to load trending players</p></div>'),mt=g('<div class="space-y-6 svelte-tdy242"><div class="flex justify-between items-center svelte-tdy242"><h3 class="text-lg font-semibold text-gray-800 svelte-tdy242">Popular Players</h3> <button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 svelte-tdy242"> </button></div> <!></div>'),yt=g('<div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-8 svelte-tdy242"><div class="flex items-center svelte-tdy242"><div class="text-red-400 mr-3 svelte-tdy242"><svg class="w-5 h-5 svelte-tdy242" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" class="svelte-tdy242"></path></svg></div> <div class="svelte-tdy242"><h3 class="text-sm font-medium text-red-800 svelte-tdy242">Error</h3> <p class="text-sm text-red-700 mt-1 svelte-tdy242"> </p></div></div></div>'),pt=g('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 svelte-tdy242"><div class="container mx-auto px-4 max-w-6xl svelte-tdy242"><div class="text-center mb-8 svelte-tdy242"><h1 class="text-4xl font-bold text-gray-900 mb-2 svelte-tdy242">SofaScore API Demo</h1> <p class="text-lg text-gray-600 svelte-tdy242">Real sports data integration for PickNWin fantasy platform</p></div> <!> <div class="bg-white rounded-lg shadow-md mb-8 svelte-tdy242"><div class="border-b border-gray-200 svelte-tdy242"><nav class="flex space-x-8 px-6 svelte-tdy242"><button>Player Search</button> <button>Live Matches</button> <button>Popular Players</button></nav></div> <div class="p-6 svelte-tdy242"><!></div></div> <!> <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 svelte-tdy242"><h3 class="text-lg font-semibold text-blue-900 mb-3 svelte-tdy242">About This Demo</h3> <div class="text-sm text-blue-800 space-y-2 svelte-tdy242"><p class="svelte-tdy242">This demo showcases the integration of the SofaScore API with the PickNWin fantasy sports platform.</p> <p class="svelte-tdy242"><strong class="svelte-tdy242">Features demonstrated:</strong></p> <ul class="list-disc list-inside ml-4 space-y-1 svelte-tdy242"><li class="svelte-tdy242">Real-time player and team search</li> <li class="svelte-tdy242">Live match data integration</li> <li class="svelte-tdy242">Intelligent caching and fallback systems</li> <li class="svelte-tdy242">Service monitoring and statistics</li> <li class="svelte-tdy242">Hybrid data sources (mock + real API)</li></ul> <p class="mt-3 svelte-tdy242"><strong class="svelte-tdy242">API Source:</strong> SofaScore via RapidAPI</p></div></div></div></div>');function kt($e,e){Ne(e,!1);let t=Y("messi"),a=Y(null),s=Y([]),o=Y([]),n=Y(null),l=Y(!1),u=Y(""),R=Y("search");async function te(){if(c(t).trim()){f(l,!0),f(u,"");try{f(a,await Z.search(c(t),"all"))}catch(v){f(u,`Search failed: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Search error:",v)}finally{f(l,!1)}}}async function ne(){f(l,!0),f(u,"");try{f(s,await ce.getLiveMatches())}catch(v){f(u,`Failed to load live matches: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Live matches error:",v)}finally{f(l,!1)}}async function oe(){f(l,!0),f(u,"");try{f(o,await ce.searchPlayers("",15))}catch(v){f(u,`Failed to load popular players: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Popular players error:",v)}finally{f(l,!1)}}async function le(){f(n,ce.getStats())}function Le(){ce.clearCache(),alert("Cache cleared successfully!"),le()}function De(){ce.resetStats(),le()}function Ee(v){v.key==="Enter"&&te()}He(()=>{le(),te()}),Ge();var ve=pt();ze(v=>{var b=Ye();Je.title="SofaScore API Demo - PickNWin",y(v,b)});var _e=i(ve),we=d(i(_e),2);{var Ie=v=>{var b=tt(),I=i(b),q=d(i(I),2),F=i(q),L=d(F,2),V=d(L,2);r(q),r(I);var G=d(I,2),_=i(G),A=i(_),H=i(A,!0);r(A),ae(2),r(_);var N=d(_,2),U=i(N),j=i(U,!0);r(U),ae(2),r(N);var k=d(N,2),X=i(k),z=i(X,!0);r(X),ae(2),r(k);var T=d(k,2),C=i(T),D=i(C);r(C),ae(2),r(T),r(G);var m=d(G,2);{var x=p=>{var w=et(),K=i(w),P=d(i(K)),$=d(P);{var W=S=>{var M=Ze(),J=i(M);r(M),E(B=>h(J,`(${B??""})`),[()=>c(n).lastErrorTime.toLocaleTimeString()]),y(S,M)};O($,S=>{c(n).lastErrorTime&&S(W)})}r(K),r(w),E(()=>h(P,` ${c(n).lastError??""} `)),y(p,w)};O(m,p=>{c(n).lastError&&p(x)})}r(b),E(p=>{h(H,c(n).totalRequests),h(j,c(n).cacheHits),h(z,c(n).sofascoreRequests),h(D,`${p??""}ms`)},[()=>Math.round(c(n).averageResponseTime)]),Q("click",F,le),Q("click",L,Le),Q("click",V,De),y(v,b)};O(we,v=>{c(n)&&v(Ie)})}var he=d(we,2),ue=i(he),Se=i(ue),me=i(Se),ye=d(me,2),Me=d(ye,2);r(Se),r(ue);var ke=d(ue,2),qe=i(ke);{var Fe=v=>{var b=ot(),I=i(b),q=i(I);Oe(q);var F=d(q,2),L=i(F,!0);r(F),r(I);var V=d(I,2);{var G=_=>{var A=it(),H=i(A),N=i(H);r(H);var U=d(H,2);fe(U,5,()=>c(a).results,ge,(j,k)=>{var X=rt(),z=i(X);{var T=D=>{const m=Pe(()=>c(k).entity);var x=at(),p=d(i(x),2),w=i(p),K=i(w,!0);r(w);var P=d(w,2),$=i(P,!0);r(P);var W=d(P,2),S=i(W);r(W);var M=d(W,2),J=d(i(M),2),B=i(J);r(J),r(M),r(p),r(x),E(ee=>{h(K,c(m).name),h($,c(m).team?.name||"No team"),h(S,`${c(m).position||"Unknown position"} • ${c(m).country.name??""}`),h(B,`${ee??""} followers`)},[()=>c(m).userCount.toLocaleString()]),y(D,x)},C=D=>{const m=Pe(()=>c(k).entity);var x=st(),p=i(x),w=i(p),K=i(w,!0);r(w),r(p);var P=d(p,2),$=i(P),W=i($,!0);r($);var S=d($,2),M=i(S,!0);r(S);var J=d(S,2),B=d(i(J),2),ee=i(B);r(B),r(J),r(P),r(x),E(de=>{Xe(p,`background-color: ${c(m).teamColors.primary??""}`),h(K,c(m).nameCode),h(W,c(m).name),h(M,c(m).country.name),h(ee,`${de??""} followers`)},[()=>c(m).userCount.toLocaleString()]),y(D,x)};O(z,D=>{c(k).type==="player"?D(T):D(C,!1)})}r(X),y(j,X)}),r(U),r(A),E(()=>h(N,`Search Results (${c(a).results.length??""})`)),y(_,A)};O(V,_=>{c(a)&&_(G)})}r(b),E(()=>{F.disabled=c(l),h(L,c(l)?"Searching...":"Search")}),Ve(q,()=>c(t),_=>f(t,_)),Q("keydown",q,Ee),Q("click",F,te),y(v,b)},Ae=v=>{var b=Re(),I=Ce(b);{var q=L=>{var V=dt(),G=i(V),_=d(i(G),2),A=i(_,!0);r(_),r(G);var H=d(G,2);{var N=j=>{var k=nt();fe(k,5,()=>c(s),ge,(X,z)=>{var T=ct(),C=i(T),D=i(C),m=i(D,!0);r(D),ae(2),r(C);var x=d(C,2),p=i(x),w=i(p),K=i(w,!0);r(w),r(p);var P=d(p,4),$=i(P),W=i($,!0);r($),r(P),r(x);var S=d(x,2),M=i(S),J=i(M);r(M);var B=d(M,2),ee=i(B);r(B),r(S),r(T),E(()=>{h(m,c(z).league),h(K,c(z).home),h(W,c(z).away),h(J,`Source: ${c(z).dataSource??""}`),h(ee,`Confidence: ${c(z).confidenceScore??""}%`)}),y(X,T)}),r(k),y(j,k)},U=j=>{var k=lt();y(j,k)};O(H,j=>{c(s).length>0?j(N):j(U,!1)})}r(V),E(()=>{_.disabled=c(l),h(A,c(l)?"Loading...":"Refresh")}),Q("click",_,ne),y(L,V)},F=L=>{var V=Re(),G=Ce(V);{var _=A=>{var H=mt(),N=i(H),U=d(i(N),2),j=i(U,!0);r(U),r(N);var k=d(N,2);{var X=T=>{var C=ht();fe(C,5,()=>c(o),ge,(D,m)=>{var x=vt(),p=i(x),w=d(i(p),2),K=i(w),P=i(K,!0);r(K);var $=d(K,2),W=i($,!0);r($);var S=d($,2),M=i(S),J=i(M,!0);r(M);var B=d(M,2),ee=i(B);r(B),r(S);var de=d(S,2),pe=i(de),Ke=i(pe);r(pe);var Te=d(pe,2),Be=i(Te);r(Te),r(de),r(w),r(p),r(x),E(()=>{h(P,c(m).name),h(W,c(m).team),h(J,c(m).position),h(ee,`${c(m).credits??""} CR`),h(Ke,`Source: ${c(m).dataSource??""}`),h(Be,`${c(m).confidenceScore??""}% confidence`)}),y(D,x)}),r(C),y(T,C)},z=T=>{var C=ut();y(T,C)};O(k,T=>{c(o).length>0?T(X):T(z,!1)})}r(H),E(()=>{U.disabled=c(l),h(j,c(l)?"Loading...":"Refresh")}),Q("click",U,oe),y(A,H)};O(G,A=>{c(R)==="popular"&&A(_)},!0)}y(L,V)};O(I,L=>{c(R)==="live"?L(q):L(F,!1)},!0)}y(v,b)};O(qe,v=>{c(R)==="search"?v(Fe):v(Ae,!1)})}r(ke),r(he);var Ue=d(he,2);{var je=v=>{var b=yt(),I=i(b),q=d(i(I),2),F=d(i(q),2),L=i(F,!0);r(F),r(q),r(I),r(b),E(()=>h(L,c(u))),y(v,b)};O(Ue,v=>{c(u)&&v(je)})}ae(2),r(_e),r(ve),E(()=>{xe(me,1,`py-4 px-1 border-b-2 font-medium text-sm ${c(R)==="search"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-tdy242"),xe(ye,1,`py-4 px-1 border-b-2 font-medium text-sm ${c(R)==="live"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-tdy242"),xe(Me,1,`py-4 px-1 border-b-2 font-medium text-sm ${c(R)==="popular"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-tdy242")}),Q("click",me,()=>f(R,"search")),Q("click",ye,()=>{f(R,"live"),ne()}),Q("click",Me,()=>{f(R,"popular"),oe()}),y($e,ve),We()}export{kt as component};
