import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as Ie}from"../chunks/d-9Q_JcI.js";import{p as De,l as at,i as Ee,f as b,h as Le,d as Et,t as P,c as a,o as I,g as t,a as m,b as Te,m as _,$ as Ne,s,j as o,r as e,q as mt,e as h,v as Oe,k as w,n as Lt,z as rt,A as Ue}from"../chunks/CC47Dqnt.js";import{i as E}from"../chunks/3oX9xRnt.js";import{e as st,i as ot}from"../chunks/Bar9hDmN.js";import{b as xt,a as bt,r as it,d as qe,e as Je,f as ee}from"../chunks/BmFDec73.js";import{s as ae}from"../chunks/CC5kzxMM.js";import{p as Re}from"../chunks/CdEA5IGF.js";import{i as Ve}from"../chunks/6Z2O6PQy.js";import{a as Be,s as Ge}from"../chunks/DLEGmHds.js";import{a as ze}from"../chunks/uE9PL26s.js";import{A as _t}from"../chunks/BKS5pudM.js";var Ke=b('<button class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Bulk Import</button>'),He=b('<button class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700">Add Player</button>'),We=b("<option> </option>"),Qe=b("<option> </option>"),Xe=b('<div class="p-8 text-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-2 text-gray-600">Loading players...</p></div>'),Ye=b('<div class="p-8 text-center"><p class="text-gray-500">No players found</p></div>'),Ze=b('<button class="text-blue-600 hover:text-blue-900">Edit</button>'),ta=b('<button class="text-red-600 hover:text-red-900">Delete</button>'),ea=b('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap"><div class="flex flex-col space-y-1"><span> </span> <span> </span></div></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex justify-end space-x-2"><!> <!></div></td></tr>'),aa=b('<div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6"><div class="flex items-center justify-between"><div class="text-sm text-gray-700"> </div> <div class="flex space-x-2"><button class="px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50">Previous</button> <span class="px-3 py-1 text-sm"> </span> <button class="px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50">Next</button></div></div></div>'),ra=b('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Player</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Team</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Position</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Points</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div> <!>',1),sa=b("<option> </option>"),oa=b("<option> </option>"),ia=b("<option> </option>"),la=b('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-gray-900 mb-4"> </h3> <form class="space-y-4"><div><label class="block text-sm font-medium text-gray-700">Name</label> <input type="text" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"/></div> <div><label class="block text-sm font-medium text-gray-700">Team</label> <select required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"><option>Select Team</option><!></select></div> <div><label class="block text-sm font-medium text-gray-700">Position</label> <select required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"><option>Select Position</option><!></select></div> <div><label class="block text-sm font-medium text-gray-700">Price (â‚¹M)</label> <input type="number" step="0.1" min="0" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"/></div> <div><label class="block text-sm font-medium text-gray-700">Points</label> <input type="number" min="0" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"/></div> <div><label class="block text-sm font-medium text-gray-700">Injury Status</label> <select class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></select></div> <div class="flex items-center"><input type="checkbox" class="mr-2"/> <label class="text-sm font-medium text-gray-700">Active Player</label></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Cancel</button> <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700"> </button></div></form></div></div></div>'),da=b('<div class="bg-gray-50 p-3 rounded text-sm"><strong>CSV Format:</strong><br/> name,team,position,price,points,isActive,injuryStatus<br/> Mohamed Salah,Liverpool,Forward,12.5,150,true,fit</div>'),na=b('<div class="bg-gray-50 p-3 rounded text-sm"><strong>JSON Format:</strong><br/> </div>'),va=b("<li> </li>"),ca=b('<div class="bg-red-50 border border-red-200 rounded p-3"><h4 class="text-sm font-medium text-red-800 mb-2">Import Errors:</h4> <ul class="text-sm text-red-700 space-y-1"></ul></div>'),ua=b('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-2/3 max-w-2xl shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-gray-900 mb-4">Bulk Import Players</h3> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Import Type</label> <div class="flex space-x-4"><label class="flex items-center"><input type="radio" class="mr-2"/> CSV</label> <label class="flex items-center"><input type="radio" class="mr-2"/> JSON</label></div></div> <!> <div><label class="block text-sm font-medium text-gray-700 mb-2">Data</label> <textarea rows="10" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm font-mono"></textarea></div> <!> <div class="flex justify-end space-x-3 pt-4"><button class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50">Import</button></div></div></div></div></div>'),pa=b('<div class="p-6"><div class="flex justify-between items-center mb-6"><div><h1 class="text-2xl font-bold text-gray-900">Players</h1> <p class="text-gray-600">Manage football players and their stats</p></div> <div class="flex space-x-3"><!> <button class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Export CSV</button> <!></div></div> <div class="bg-white p-4 rounded-lg shadow mb-6"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">Search</label> <input type="text" placeholder="Search players or teams..." class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Position</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"><option>All Positions</option><!></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Team</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"><option>All Teams</option><!></select></div> <div class="flex items-end"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800">Clear Filters</button></div></div></div> <div class="bg-white rounded-lg shadow overflow-hidden"><!></div></div> <!> <!>',1);function ja(re,se){De(se,!1);const K=()=>Ge(ze,"$adminAuthStore",oe),[oe,ie]=Be(),Tt=_(),Nt=_(),Ot=_(),Ut=_(),L=_(),ft=_(),vt=_(),qt=[];let yt=_([]),wt=_(!1),X=_(""),Y=_(""),Z=_(""),ct=_(!1),gt=_(!1),lt=_(null),H=_(""),tt=_("csv"),R=_([]),$=_(1),ut=20,le=0,d=_({name:"",team:"",position:"GK",price:0,points:0,isActive:!0,injuryStatus:"fit"});const Jt=[{label:"Goalkeeper",value:"GK"},{label:"Defender",value:"DEF"},{label:"Midfielder",value:"MID"},{label:"Forward",value:"FWD"}],Rt=["Arsenal","Chelsea","Liverpool","Manchester City","Manchester United","Tottenham"],de=["fit","injured","doubtful"];Ie(()=>{ht()});async function ht(){o(wt,!0);try{o(yt,await _t.players.list()),le=t(yt).length}catch(r){console.error("Failed to load players:",r)}finally{o(wt,!1)}}function ne(){kt(),o(ct,!0)}function ve(r){o(lt,r),o(d,{name:r.name,team:r.team,position:r.position,price:r.price,points:r.points,isActive:r.isActive,injuryStatus:r.injuryStatus||"fit"}),o(ct,!0)}function kt(){o(lt,null),o(d,{name:"",team:"",position:"GK",price:0,points:0,isActive:!0,injuryStatus:"fit"})}async function ce(){try{t(lt)?await _t.players.update(t(lt).id,t(d)):await _t.players.create(t(d)),o(ct,!1),kt(),ht()}catch(r){console.error("Failed to save player:",r)}}async function ue(r){if(confirm("Are you sure you want to delete this player?"))try{await _t.players.delete(r),ht()}catch(i){console.error("Failed to delete player:",i)}}function pe(){o(H,""),o(R,[]),o(gt,!0)}async function me(){try{o(R,[]);let r;if(t(tt)==="csv"){const i=t(H).trim().split(`
`),v=i[0].split(",").map(x=>x.trim());r=i.slice(1).map((x,c)=>{const A=x.split(",").map(k=>k.trim()),u={};return v.forEach((k,M)=>{u[k]=A[M]||""}),!u.name||!u.team||!u.position?(t(R).push(`Row ${c+2}: Missing required fields`),null):{name:u.name,team:u.team,position:u.position,price:parseFloat(u.price)||0,points:parseFloat(u.points)||0,isActive:u.isActive!=="false",injuryStatus:u.injuryStatus||"fit"}}).filter(Boolean)}else if(r=JSON.parse(t(H)),!Array.isArray(r))throw new Error("JSON data must be an array");t(R).length===0&&r.length>0&&(await _t.players.bulkCreate(r),o(gt,!1),ht())}catch(r){t(R).push(`Parse error: ${r instanceof Error?r.message:"Unknown error"}`)}}function xe(){const r=["name,team,position,price,points,isActive,injuryStatus",...t(L).map(c=>`${c.name},${c.team},${c.position},${c.price},${c.points},${c.isActive},${c.injuryStatus}`)].join(`
`),i=new Blob([r],{type:"text/csv"}),v=URL.createObjectURL(i),x=document.createElement("a");x.href=v,x.download=`players-${new Date().toISOString().split("T")[0]}.csv`,x.click(),URL.revokeObjectURL(v)}function be(r){switch(r){case"fit":return"bg-green-100 text-green-800";case"injured":return"bg-red-100 text-red-800";case"doubtful":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}at(()=>K(),()=>{o(Tt,K().permissions.players?.update??!1)}),at(()=>K(),()=>{o(Nt,K().permissions.players?.delete??!1)}),at(()=>K(),()=>{o(Ot,K().permissions.players?.create??!1)}),at(()=>K(),()=>{o(Ut,K().permissions.players?.create??!1)}),at(()=>(t(yt),t(X),t(Y),t(Z)),()=>{o(L,t(yt).filter(r=>{const i=!t(X)||r.name.toLowerCase().includes(t(X).toLowerCase())||r.team.toLowerCase().includes(t(X).toLowerCase()),v=!t(Y)||r.position===t(Y),x=!t(Z)||r.team===t(Z);return i&&v&&x}))}),at(()=>(t(L),t($)),()=>{o(ft,t(L).slice((t($)-1)*ut,t($)*ut))}),at(()=>t(L),()=>{o(vt,Math.ceil(t(L).length/ut))}),Ee(),Ve();var Vt=pa();Le(r=>{Ne.title="Players Management - Dream11 Admin"});var St=Et(Vt),Pt=a(St),Bt=s(a(Pt),2),Gt=a(Bt);{var _e=r=>{var i=Ke();I("click",i,pe),m(r,i)};E(Gt,r=>{t(Ut)&&r(_e)})}var zt=s(Gt,2),fe=s(zt,2);{var ye=r=>{var i=He();I("click",i,ne),m(r,i)};E(fe,r=>{t(Ot)&&r(ye)})}e(Bt),e(Pt);var At=s(Pt,2),Kt=a(At),jt=a(Kt),Ht=s(a(jt),2);it(Ht),e(jt);var $t=s(jt,2),Mt=s(a($t),2);P(()=>{t(Y),mt(()=>{})});var Ct=a(Mt);Ct.value=Ct.__value="";var ge=s(Ct);st(ge,1,()=>Jt,ot,(r,i)=>{var v=We(),x=a(v,!0);e(v);var c={};P(()=>{h(x,t(i)),c!==(c=t(i))&&(v.value=(v.__value=t(i))??"")}),m(r,v)}),e(Mt),e($t);var Ft=s($t,2),It=s(a(Ft),2);P(()=>{t(Z),mt(()=>{})});var Dt=a(It);Dt.value=Dt.__value="";var he=s(Dt);st(he,1,()=>Rt,ot,(r,i)=>{var v=Qe(),x=a(v,!0);e(v);var c={};P(()=>{h(x,t(i)),c!==(c=t(i))&&(v.value=(v.__value=t(i))??"")}),m(r,v)}),e(It),e(Ft);var Wt=s(Ft,2),we=a(Wt);e(Wt),e(Kt),e(At);var Qt=s(At,2),ke=a(Qt);{var Se=r=>{var i=Xe();m(r,i)},Pe=r=>{var i=Oe(),v=Et(i);{var x=A=>{var u=Ye();m(A,u)},c=A=>{var u=ra(),k=Et(u),M=a(k),V=s(a(M));st(V,5,()=>t(ft),ot,(B,l)=>{var j=ea(),S=a(j),N=a(S),O=a(N,!0);e(N);var C=s(N,2),F=a(C);e(C),e(S);var D=s(S),n=a(D,!0);e(D);var f=s(D),U=a(f,!0);e(f);var Q=s(f),dt=a(Q);e(Q);var q=s(Q),nt=a(q,!0);e(q);var pt=s(q),p=a(pt),y=a(p),g=a(y,!0);e(y);var G=s(y,2),J=a(G,!0);e(G),e(p),e(pt);var Yt=s(pt),Zt=a(Yt),te=a(Zt);{var Me=z=>{var et=Ze();I("click",et,()=>ve(t(l))),m(z,et)};E(te,z=>{t(Tt)&&z(Me)})}var Ce=s(te,2);{var Fe=z=>{var et=ta();I("click",et,()=>ue(t(l).id)),m(z,et)};E(Ce,z=>{t(Nt)&&z(Fe)})}e(Zt),e(Yt),e(j),P((z,et)=>{h(O,(t(l),w(()=>t(l).name))),h(F,`ID: ${t(l),w(()=>t(l).id)??""}`),h(n,(t(l),w(()=>t(l).team))),h(U,(t(l),w(()=>t(l).position))),h(dt,`â‚¹${z??""}M`),h(nt,(t(l),w(()=>t(l).points))),ae(y,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t(l),w(()=>t(l).isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800")??""}`),h(g,(t(l),w(()=>t(l).isActive?"Active":"Inactive"))),ae(G,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${et??""}`),h(J,(t(l),w(()=>t(l).injuryStatus||"Healthy")))},[()=>(t(l),w(()=>t(l).price.toFixed(1))),()=>(t(l),w(()=>be(t(l).injuryStatus||"healthy")))]),m(B,j)}),e(V),e(M),e(k);var T=s(k,2);{var W=B=>{var l=aa(),j=a(l),S=a(j),N=a(S);e(S);var O=s(S,2),C=a(O),F=s(C,2),D=a(F);e(F);var n=s(F,2);e(O),e(j),e(l),P(f=>{h(N,`Showing ${(t($)-1)*ut+1} to ${f??""} of ${t(L),w(()=>t(L).length)??""} results`),C.disabled=t($)===1,h(D,`Page ${t($)??""} of ${t(vt)??""}`),n.disabled=t($)===t(vt)},[()=>(t($),t(L),w(()=>Math.min(t($)*ut,t(L).length)))]),I("click",C,()=>o($,Math.max(1,t($)-1))),I("click",n,()=>o($,Math.min(t(vt),t($)+1))),m(B,l)};E(T,B=>{t(vt)>1&&B(W)})}m(A,u)};E(v,A=>{t(ft),w(()=>t(ft).length===0)?A(x):A(c,!1)},!0)}m(r,i)};E(ke,r=>{t(wt)?r(Se):r(Pe,!1)})}e(Qt),e(St);var Xt=s(St,2);{var Ae=r=>{var i=la(),v=a(i),x=a(v),c=a(x),A=a(c,!0);e(c);var u=s(c,2),k=a(u),M=s(a(k),2);it(M),e(k);var V=s(k,2),T=s(a(V),2);P(()=>{t(d),mt(()=>{})});var W=a(T);W.value=W.__value="";var B=s(W);st(B,1,()=>Rt,ot,(p,y)=>{var g=sa(),G=a(g,!0);e(g);var J={};P(()=>{h(G,t(y)),J!==(J=t(y))&&(g.value=(g.__value=t(y))??"")}),m(p,g)}),e(T),e(V);var l=s(V,2),j=s(a(l),2);P(()=>{t(d),mt(()=>{})});var S=a(j);S.value=S.__value="";var N=s(S);st(N,1,()=>Jt,ot,(p,y)=>{var g=oa(),G=a(g,!0);e(g);var J={};P(()=>{h(G,(t(y),w(()=>t(y).label))),J!==(J=(t(y),w(()=>t(y).value)))&&(g.value=(g.__value=(t(y),w(()=>t(y).value)))??"")}),m(p,g)}),e(j),e(l);var O=s(l,2),C=s(a(O),2);it(C),e(O);var F=s(O,2),D=s(a(F),2);it(D),e(F);var n=s(F,2),f=s(a(n),2);P(()=>{t(d),mt(()=>{})}),st(f,5,()=>de,ot,(p,y)=>{var g=ia(),G=a(g,!0);e(g);var J={};P(()=>{h(G,t(y)),J!==(J=t(y))&&(g.value=(g.__value=t(y))??"")}),m(p,g)}),e(f),e(n);var U=s(n,2),Q=a(U);it(Q),Lt(2),e(U);var dt=s(U,2),q=a(dt),nt=s(q,2),pt=a(nt,!0);e(nt),e(dt),e(u),e(x),e(v),e(i),P(()=>{h(A,t(lt)?"Edit Player":"Create Player"),h(pt,t(lt)?"Update":"Create")}),xt(M,()=>t(d).name,p=>rt(d,t(d).name=p)),bt(T,()=>t(d).team,p=>rt(d,t(d).team=p)),bt(j,()=>t(d).position,p=>rt(d,t(d).position=p)),xt(C,()=>t(d).price,p=>rt(d,t(d).price=p)),xt(D,()=>t(d).points,p=>rt(d,t(d).points=p)),bt(f,()=>t(d).injuryStatus,p=>rt(d,t(d).injuryStatus=p)),qe(Q,()=>t(d).isActive,p=>rt(d,t(d).isActive=p)),I("click",q,()=>{o(ct,!1),kt()}),I("submit",u,Re(ce)),m(r,i)};E(Xt,r=>{t(ct)&&r(Ae)})}var je=s(Xt,2);{var $e=r=>{var i=ua(),v=a(i),x=a(v),c=s(a(x),2),A=a(c),u=s(a(A),2),k=a(u),M=a(k);it(M),M.value=M.__value="csv",Lt(),e(k);var V=s(k,2),T=a(V);it(T),T.value=T.__value="json",Lt(),e(V),e(u),e(A);var W=s(A,2);{var B=n=>{var f=da();m(n,f)},l=n=>{var f=na(),U=s(a(f),2);U.nodeValue=' [{"name": "Mohamed Salah", "team": "Liverpool", "position": "Forward", "price": 12.5, "points": 150, "isActive": true, "injuryStatus": "fit"}]',e(f),m(n,f)};E(W,n=>{t(tt)==="csv"?n(B):n(l,!1)})}var j=s(W,2),S=s(a(j),2);Ue(S),e(j);var N=s(j,2);{var O=n=>{var f=ca(),U=s(a(f),2);st(U,5,()=>t(R),ot,(Q,dt)=>{var q=va(),nt=a(q);e(q),P(()=>h(nt,`â€¢ ${t(dt)??""}`)),m(Q,q)}),e(U),e(f),m(n,f)};E(N,n=>{t(R),w(()=>t(R).length>0)&&n(O)})}var C=s(N,2),F=a(C),D=s(F,2);e(C),e(c),e(x),e(v),e(i),P(n=>{Je(S,"placeholder",t(tt)==="csv"?"Paste CSV data here...":"Paste JSON data here..."),D.disabled=n},[()=>(t(H),w(()=>!t(H).trim()))]),ee(qt,[],M,()=>t(tt),n=>o(tt,n)),ee(qt,[],T,()=>t(tt),n=>o(tt,n)),xt(S,()=>t(H),n=>o(H,n)),I("click",F,()=>{o(gt,!1),o(H,""),o(R,[])}),I("click",D,me),m(r,i)};E(je,r=>{t(gt)&&r($e)})}I("click",zt,xe),xt(Ht,()=>t(X),r=>o(X,r)),bt(Mt,()=>t(Y),r=>o(Y,r)),bt(It,()=>t(Z),r=>o(Z,r)),I("click",we,()=>{o(X,""),o(Y,""),o(Z,"")}),m(re,Vt),Te(),ie()}export{ja as component};
