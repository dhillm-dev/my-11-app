import"../chunks/DsnmJJEf.js";import{i as Ge}from"../chunks/6GZusgt_.js";import{o as He}from"../chunks/8x6lrutn.js";import{p as Ne,f as y,t as E,av as Q,a as p,b as ze,$ as We,s as d,c as o,g as l,Z,r,n as ae,K as g,aA as Re,d as Ce,I as Pe}from"../chunks/BxP-Bn-J.js";import{h as Oe,s as h}from"../chunks/52Mq0XaK.js";import{i as J}from"../chunks/CHs-BGr5.js";import{e as ge,i as ye}from"../chunks/rXCQzQ71.js";import{r as Je,s as Ve}from"../chunks/hoSVDtOQ.js";import{s as xe}from"../chunks/B3R9TjWp.js";import{b as Xe}from"../chunks/DbKgpfrA.js";const Qe=!0,Ze=!1,Pt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Qe,ssr:Ze},Symbol.toStringTag,{value:"Module"}));class se{static instance;config;cache=new Map;requestCount=0;lastResetTime=Date.now();constructor(e){this.config=e}static getInstance(e){if(!se.instance){if(!e)throw new Error("SofaScoreAdapter requires configuration on first initialization");se.instance=new se(e)}return se.instance}async search(e,t="all",a=0){const s=`search_${e}_${t}_${a}`,i=this.getFromCache(s);if(i)return i;await this.checkRateLimit();const c=`${this.config.baseUrl}/search?q=${encodeURIComponent(e)}&type=${t}&page=${a}`,n=await this.makeRequest(c);return this.setCache(s,n),n}async getPlayer(e){const t=`player_${e}`,a=this.getFromCache(t);if(a)return a;await this.checkRateLimit();const s=`${this.config.baseUrl}/player/${e}`,i=await this.makeRequest(s);return this.setCache(t,i),i}async getTeam(e){const t=`team_${e}`,a=this.getFromCache(t);if(a)return a;await this.checkRateLimit();const s=`${this.config.baseUrl}/team/${e}`,i=await this.makeRequest(s);return this.setCache(t,i),i}async getMatchesByDate(e){const t=e.toISOString().split("T")[0],a=`matches_${t}`,s=this.getFromCache(a);if(s)return s;await this.checkRateLimit();const i=`${this.config.baseUrl}/sport/football/scheduled-events/${t}`,c=await this.makeRequest(i);return this.setCache(a,c.events||[]),c.events||[]}async getLiveMatches(){const e="live_matches",t=this.getFromCache(e,3e4);if(t)return t;await this.checkRateLimit();const a=`${this.config.baseUrl}/sport/football/events/live`,s=await this.makeRequest(a);return this.setCache(e,s.events||[],3e4),s.events||[]}convertToFeedMatch(e){const t=new Date(e.startTimestamp*1e3),a=this.mapMatchStatus(e.status.code);return{id:`sofa_${e.id}`,matchId:`sofa_${e.id}`,league:e.tournament.name,home:e.homeTeam.name,away:e.awayTeam.name,homeTeam:e.homeTeam.name,awayTeam:e.awayTeam.name,homeTeamLogo:`/logos/sofa_${e.homeTeam.id}.png`,awayTeamLogo:`/logos/sofa_${e.awayTeam.id}.png`,kickoff:t,startTime:t,status:a,popularity:Math.min(100,Math.floor(e.homeTeam.userCount/1e4)),source:"SofaScore",lastUpdated:new Date,venue:`${e.homeTeam.name} Stadium`,lineupStatus:"probable",curationState:"feed_only",auditTrail:[],players:[]}}convertToFeedPlayer(e,t){const a=this.mapPlayerPosition(e.position),s=this.calculatePlayerCredits(e,a);return{id:`sofa_${e.id}`,matchId:t,name:e.name,team:e.team?.name||"Unknown",position:this.mapPositionCode(a),role:a,credits:s,points:0,selectedBy:Math.random()*100,isPlaying:!0,meta:{injuryStatus:"fit",form:Math.random()*10,value:Math.floor(Math.random()*5e7)+1e6}}}async getPopularPlayers(e=20){const t=["messi","ronaldo","mbappe","haaland","neymar","salah","kane","benzema"],a=[];for(const s of t.slice(0,Math.ceil(e/t.length)))try{const c=(await this.search(s,"player",0)).results.filter(n=>n.type==="player").slice(0,3).map(n=>this.convertToFeedPlayer(n.entity,"popular"));a.push(...c)}catch(i){console.warn(`Failed to fetch players for query: ${s}`,i)}return a.slice(0,e)}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,hitRate:0}}async makeRequest(e){try{const t=await fetch(e,{headers:{"X-RapidAPI-Host":"sofascore.p.rapidapi.com","X-RapidAPI-Key":this.config.apiKey,"Content-Type":"application/json"},method:"GET"});if(!t.ok){const a=await t.text();throw console.error(`RapidAPI SofaScore error: ${t.status} ${t.statusText}`,a),new Error(`RapidAPI SofaScore error: ${t.status} ${t.statusText}`)}return t.json()}catch(t){throw console.error("RapidAPI request failed:",t),t}}async checkRateLimit(){const e=Date.now(),t=e-this.lastResetTime;if(t>=6e4&&(this.requestCount=0,this.lastResetTime=e),this.requestCount>=this.config.rateLimit){const a=6e4-t;await new Promise(s=>setTimeout(s,a)),this.requestCount=0,this.lastResetTime=Date.now()}this.requestCount++}getFromCache(e,t){const a=this.cache.get(e);return a&&a.expires>Date.now()?a.data:(a&&this.cache.delete(e),null)}setCache(e,t,a){const s=a||this.config.cacheTtl;this.cache.set(e,{data:t,expires:Date.now()+s})}mapMatchStatus(e){return e===0?"upcoming":e>=1&&e<=6?"live":"completed"}mapPlayerPosition(e){if(!e)return"midfielder";const t=e.toLowerCase();return t.includes("g")||t.includes("keeper")?"goalkeeper":t.includes("d")||t.includes("def")?"defender":t.includes("f")||t.includes("forward")||t.includes("striker")?"forward":"midfielder"}mapPositionCode(e){switch(e){case"goalkeeper":return"GK";case"defender":return"DEF";case"midfielder":return"MID";case"forward":return"FWD";default:return"MID"}}calculatePlayerCredits(e,t){const a={goalkeeper:5,defender:6,midfielder:7,forward:8},s=Math.min(2,1+e.userCount/1e6);return Math.round(a[t]*s*10)/10}}const Ye={apiKey:"23eba5e004mshdb855f7e2e9c0c3p13cd89jsn53631ff75549",baseUrl:"https://sofascore.p.rapidapi.com",rateLimit:100,cacheTtl:3e5},Y=se.getInstance(Ye);class re{static instance;mockMatches=[];mockPlayers=[];constructor(){this.initializeMockData()}static getInstance(){return re.instance||(re.instance=new re),re.instance}async listUpcoming(e,t){return await new Promise(a=>setTimeout(a,200)),this.mockMatches.filter(a=>a.kickoff>=e&&a.kickoff<=t&&a.status==="upcoming")}async getMatch(e){return await new Promise(t=>setTimeout(t,100)),this.mockMatches.find(t=>t.matchId===e)||null}async getPlayers(e){return await new Promise(t=>setTimeout(t,150)),this.mockPlayers.filter(t=>t.matchId===e)}updateCurationState(e,t,a){const s=this.mockMatches.find(i=>i.matchId===e);if(s){const i=s.curationState;s.curationState=t,s.lastUpdated=new Date,s.auditTrail.push({id:crypto.randomUUID(),who:a,what:`Changed curation state from ${i} to ${t}`,entity:"match",before:{curationState:i},after:{curationState:t},when:new Date}),this.saveCurationState()}}bulkUpdateCuration(e,t,a){e.forEach(s=>{this.updateCurationState(s,t,a)})}async refreshFeed(){await new Promise(e=>setTimeout(e,1e3)),this.mockMatches.forEach(e=>{e.lastUpdated=new Date,e.popularity=Math.max(0,Math.min(100,e.popularity+(Math.random()-.5)*10))})}initializeMockData(){this.loadCurationState(),this.mockMatches.length===0&&this.generateMockMatches()}generateMockMatches(){const e=["EPL","LALIGA","UCL","BUNDESLIGA","SERIE_A","LIGUE_1"],t={EPL:["Arsenal","Chelsea","Liverpool","Man City","Man United","Tottenham"],LALIGA:["Real Madrid","Barcelona","Atletico Madrid","Sevilla","Valencia","Villarreal"],UCL:["Bayern Munich","PSG","Juventus","AC Milan","Inter Milan","Dortmund"],BUNDESLIGA:["Bayern Munich","Dortmund","RB Leipzig","Bayer Leverkusen","Wolfsburg","Frankfurt"],SERIE_A:["Juventus","AC Milan","Inter Milan","Napoli","Roma","Lazio"],LIGUE_1:["PSG","Marseille","Lyon","Monaco","Nice","Lille"]},a=new Date;for(let s=0;s<50;s++){const i=e[Math.floor(Math.random()*e.length)],c=t[i],n=c[Math.floor(Math.random()*c.length)];let u=c[Math.floor(Math.random()*c.length)];for(;u===n;)u=c[Math.floor(Math.random()*c.length)];const R=new Date(a.getTime()+Math.random()*7*24*60*60*1e3),te=Math.floor(Math.random()*100),ce=["EPL","LALIGA","UCL"].includes(i)&&te>70,ie={id:`match_${s+1}`,matchId:`feed_${Date.now()}_${s}`,league:i,home:n,away:u,homeTeam:n,awayTeam:u,homeTeamLogo:`/logos/${n.toLowerCase().replace(" ","_")}.png`,awayTeamLogo:`/logos/${u.toLowerCase().replace(" ","_")}.png`,kickoff:R,startTime:R,status:"upcoming",popularity:te,source:"MockFeed",lastUpdated:new Date,venue:`${n} Stadium`,lineupStatus:Math.random()>.3?"confirmed":"probable",odds:{home:1.5+Math.random()*2,draw:3+Math.random()*2,away:1.5+Math.random()*2},curationState:ce?"curated":"feed_only",auditTrail:[],players:[]};this.mockMatches.push(ie),this.generatePlayersForMatch(ie.matchId,n,u)}}generatePlayersForMatch(e,t,a){const s=["goalkeeper","defender","midfielder","forward"],i={goalkeeper:2,defender:8,midfielder:8,forward:6};[t,a].forEach(c=>{s.forEach(n=>{for(let u=0;u<i[n];u++){const R={id:`${e}_${c}_${n}_${u}`,matchId:e,name:`${c} ${n} ${u+1}`,team:c,position:n==="goalkeeper"?"GK":n==="defender"?"DEF":n==="midfielder"?"MID":"FWD",role:n,credits:n==="goalkeeper"?5+Math.random()*3:n==="defender"?6+Math.random()*4:n==="midfielder"?7+Math.random()*5:8+Math.random()*6,points:0,selectedBy:Math.random()*100,isPlaying:Math.random()>.1,meta:{injuryStatus:Math.random()>.8?"doubtful":"fit",form:Math.random()*10,value:1e6+Math.random()*5e7}};this.mockPlayers.push(R)}})})}saveCurationState(){if(typeof localStorage<"u"){const e=this.mockMatches.map(t=>({matchId:t.matchId,curationState:t.curationState,auditTrail:t.auditTrail}));localStorage.setItem("picknwin_curation_state",JSON.stringify(e))}}loadCurationState(){if(typeof localStorage<"u"){const e=localStorage.getItem("picknwin_curation_state");if(e){const t=JSON.parse(e);this.applySavedCurationStates=t}}}applySavedCurationStates=[]}const be=re.getInstance();class oe{static instance;config;stats;cache=new Map;constructor(e={}){this.config={primarySource:"hybrid",fallbackEnabled:!0,cacheEnabled:!0,maxRetries:3,timeoutMs:1e4,...e},this.stats={totalRequests:0,mockRequests:0,sofascoreRequests:0,cacheHits:0,cacheMisses:0,errorCount:0,averageResponseTime:0}}static getInstance(e){return oe.instance||(oe.instance=new oe(e)),oe.instance}async getUpcomingMatches(e,t){const a=Date.now();this.stats.totalRequests++;try{const s=`upcoming_${e.getTime()}_${t.getTime()}`;if(this.config.cacheEnabled){const c=this.getFromCache(s);if(c)return this.stats.cacheHits++,this.updateResponseTime(a),c;this.stats.cacheMisses++}let i=[];switch(this.config.primarySource){case"mock":i=await this.getMockMatches(e,t);break;case"sofascore":i=await this.getSofaScoreMatches(e,t);break;case"hybrid":i=await this.getHybridMatches(e,t);break}return this.config.cacheEnabled&&i.length>0&&this.setCache(s,i,3e5),this.updateResponseTime(a),i}catch(s){if(this.handleError(s),this.updateResponseTime(a),this.config.fallbackEnabled&&this.config.primarySource!=="mock")return console.warn("Falling back to mock data due to error:",s),this.getMockMatches(e,t);throw s}}async getMatchPlayers(e){const t=Date.now();this.stats.totalRequests++;try{const a=`players_${e}`;if(this.config.cacheEnabled){const i=this.getFromCache(a);if(i)return this.stats.cacheHits++,this.updateResponseTime(t),i;this.stats.cacheMisses++}let s=[];return e.startsWith("sofa_")?s=await this.getSofaScorePlayers(e):s=await this.getMockPlayers(e),this.config.cacheEnabled&&s.length>0&&this.setCache(a,s,6e5),this.updateResponseTime(t),s}catch(a){if(this.handleError(a),this.updateResponseTime(t),this.config.fallbackEnabled)return console.warn("Falling back to mock players due to error:",a),this.getMockPlayers(e);throw a}}async searchPlayers(e,t=20){const a=Date.now();this.stats.totalRequests++;try{const s=`search_${e}_${t}`;if(this.config.cacheEnabled){const c=this.getFromCache(s);if(c)return this.stats.cacheHits++,this.updateResponseTime(a),c;this.stats.cacheMisses++}let i=[];if(this.config.primarySource!=="mock")try{i=(await Y.search(e,"player")).results.filter(n=>n.type==="player").slice(0,t).map(n=>this.enhanceSofaScorePlayer(Y.convertToFeedPlayer(n.entity,"search"))),this.stats.sofascoreRequests++}catch(c){console.warn("SofaScore search failed, using mock data:",c)}if(i.length<t){const c=await this.searchMockPlayers(e,t-i.length);i.push(...c)}return this.config.cacheEnabled&&i.length>0&&this.setCache(s,i,6e5),this.updateResponseTime(a),i}catch(s){throw this.handleError(s),this.updateResponseTime(a),s}}async getLiveMatches(){const e=Date.now();this.stats.totalRequests++;try{const t="live_matches",a=this.getFromCache(t,3e4);if(a)return this.stats.cacheHits++,this.updateResponseTime(e),a;this.stats.cacheMisses++;let s=[];if(this.config.primarySource!=="mock")try{s=(await Y.getLiveMatches()).map(c=>this.enhanceSofaScoreMatch(Y.convertToFeedMatch(c))),this.stats.sofascoreRequests++}catch(i){console.warn("SofaScore live matches failed:",i)}return this.config.cacheEnabled&&s.length>0&&this.setCache(t,s,3e4),this.updateResponseTime(e),s}catch(t){return this.handleError(t),this.updateResponseTime(e),[]}}updateConfig(e){this.config={...this.config,...e},e.cacheEnabled||this.cache.clear()}getStats(){return{...this.stats}}clearCache(){this.cache.clear(),Y.clearCache()}resetStats(){this.stats={totalRequests:0,mockRequests:0,sofascoreRequests:0,cacheHits:0,cacheMisses:0,errorCount:0,averageResponseTime:0}}async getMockMatches(e,t){return this.stats.mockRequests++,(await be.listUpcoming(e,t)).map(s=>this.enhanceMockMatch(s))}async getSofaScoreMatches(e,t){this.stats.sofascoreRequests++;const a=[],s=new Date(e);for(;s<=t;){try{const c=(await Y.getMatchesByDate(s)).map(n=>this.enhanceSofaScoreMatch(Y.convertToFeedMatch(n)));a.push(...c)}catch(i){console.warn(`Failed to get matches for ${s.toISOString()}:`,i)}s.setDate(s.getDate()+1)}return a}async getHybridMatches(e,t){const[a,s]=await Promise.allSettled([this.getMockMatches(e,t),this.getSofaScoreMatches(e,t)]),i=[];if(s.status==="fulfilled"&&i.push(...s.value),a.status==="fulfilled"){const c=a.value.filter(n=>!i.some(u=>this.matchesAreSimilar(n,u)));i.push(...c)}return i.sort((c,n)=>c.kickoff.getTime()-n.kickoff.getTime())}async getMockPlayers(e){return this.stats.mockRequests++,(await be.getPlayers(e)).map(a=>this.enhanceMockPlayer(a))}async getSofaScorePlayers(e){return this.stats.sofascoreRequests++,[]}async searchMockPlayers(e,t){return this.stats.mockRequests++,(await be.getPlayers("mock_search")).filter(i=>i.name.toLowerCase().includes(e.toLowerCase())).slice(0,t).map(i=>this.enhanceMockPlayer(i))}enhanceMockMatch(e){return{...e,dataSource:"mock",confidenceScore:85,lastSyncTime:new Date}}enhanceSofaScoreMatch(e){return{...e,dataSource:"sofascore",confidenceScore:95,lastSyncTime:new Date}}enhanceMockPlayer(e){return{...e,dataSource:"mock",confidenceScore:80,lastSyncTime:new Date}}enhanceSofaScorePlayer(e){return{...e,dataSource:"sofascore",confidenceScore:95,lastSyncTime:new Date}}matchesAreSimilar(e,t){const a=Math.abs(e.kickoff.getTime()-t.kickoff.getTime());return(e.home===t.home&&e.away===t.away||e.home===t.away&&e.away===t.home)&&a<36e5}getFromCache(e,t){const a=this.cache.get(e);return a&&a.expires>Date.now()?a.data:(a&&this.cache.delete(e),null)}setCache(e,t,a){this.cache.set(e,{data:t,expires:Date.now()+a,source:this.config.primarySource})}handleError(e){this.stats.errorCount++,this.stats.lastError=e.message,this.stats.lastErrorTime=new Date,console.error("UnifiedFeedService error:",e)}updateResponseTime(e){const t=Date.now()-e;this.stats.averageResponseTime=(this.stats.averageResponseTime*(this.stats.totalRequests-1)+t)/this.stats.totalRequests}}const le=oe.getInstance({primarySource:"hybrid",fallbackEnabled:!0,cacheEnabled:!0,maxRetries:3,timeoutMs:1e4});var et=y('<meta name="description" content="Demo of SofaScore API integration for real sports data" class="svelte-11r88ol"/>'),tt=y('<span class="text-red-600 svelte-11r88ol"> </span>'),at=y('<div class="mt-4 p-3 bg-red-50 border border-red-200 rounded svelte-11r88ol"><div class="text-sm text-red-800 svelte-11r88ol"><strong class="svelte-11r88ol">Last Error:</strong> <!></div></div>'),st=y('<div class="bg-white rounded-lg shadow-md p-6 mb-8 svelte-11r88ol"><div class="flex justify-between items-center mb-4 svelte-11r88ol"><h2 class="text-xl font-semibold text-gray-800 svelte-11r88ol">Service Statistics</h2> <div class="space-x-2 svelte-11r88ol"><button class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 svelte-11r88ol">Refresh</button> <button class="px-3 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-600 svelte-11r88ol">Clear Cache</button> <button class="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 svelte-11r88ol">Reset Stats</button></div></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 svelte-11r88ol"><div class="text-center svelte-11r88ol"><div class="text-2xl font-bold text-blue-600 svelte-11r88ol"> </div> <div class="text-sm text-gray-600 svelte-11r88ol">Total Requests</div></div> <div class="text-center svelte-11r88ol"><div class="text-2xl font-bold text-green-600 svelte-11r88ol"> </div> <div class="text-sm text-gray-600 svelte-11r88ol">Cache Hits</div></div> <div class="text-center svelte-11r88ol"><div class="text-2xl font-bold text-orange-600 svelte-11r88ol"> </div> <div class="text-sm text-gray-600 svelte-11r88ol">SofaScore API</div></div> <div class="text-center svelte-11r88ol"><div class="text-2xl font-bold text-purple-600 svelte-11r88ol"> </div> <div class="text-sm text-gray-600 svelte-11r88ol">Avg Response</div></div></div> <!></div>'),rt=y('<div class="flex items-center space-x-3 svelte-11r88ol"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center svelte-11r88ol"><span class="text-blue-600 font-semibold text-lg svelte-11r88ol">⚽</span></div> <div class="flex-1 svelte-11r88ol"><h4 class="font-semibold text-gray-900 svelte-11r88ol"> </h4> <p class="text-sm text-gray-600 svelte-11r88ol"> </p> <p class="text-xs text-gray-500 svelte-11r88ol"> </p> <div class="flex items-center space-x-2 mt-1 svelte-11r88ol"><span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded svelte-11r88ol">Player</span> <span class="text-xs text-gray-500 svelte-11r88ol"> </span></div></div></div>'),ot=y('<div class="flex items-center space-x-3 svelte-11r88ol"><div class="w-12 h-12 rounded-full flex items-center justify-center svelte-11r88ol"><span class="text-white font-semibold text-sm svelte-11r88ol"> </span></div> <div class="flex-1 svelte-11r88ol"><h4 class="font-semibold text-gray-900 svelte-11r88ol"> </h4> <p class="text-sm text-gray-600 svelte-11r88ol"> </p> <div class="flex items-center space-x-2 mt-1 svelte-11r88ol"><span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded svelte-11r88ol">Team</span> <span class="text-xs text-gray-500 svelte-11r88ol"> </span></div></div></div>'),it=y('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-11r88ol"><!></div>'),lt=y('<div class="space-y-4 svelte-11r88ol"><h3 class="text-lg font-semibold text-gray-800 svelte-11r88ol"> </h3> <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 svelte-11r88ol"></div></div>'),ct=y('<div class="space-y-6 svelte-11r88ol"><div class="flex space-x-4 svelte-11r88ol"><input placeholder="Search for players or teams..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-11r88ol"/> <button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed svelte-11r88ol"> </button></div> <!></div>'),nt=y('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-11r88ol"><div class="flex justify-between items-center mb-2 svelte-11r88ol"><span class="text-sm font-medium text-gray-600 svelte-11r88ol"> </span> <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full animate-pulse svelte-11r88ol">🔴 LIVE</span></div> <div class="flex justify-between items-center svelte-11r88ol"><div class="text-center flex-1 svelte-11r88ol"><div class="font-semibold text-gray-900 svelte-11r88ol"> </div></div> <div class="text-center px-4 svelte-11r88ol"><div class="text-lg font-bold text-gray-800 svelte-11r88ol">VS</div></div> <div class="text-center flex-1 svelte-11r88ol"><div class="font-semibold text-gray-900 svelte-11r88ol"> </div></div></div> <div class="mt-3 flex justify-between items-center text-sm text-gray-600 svelte-11r88ol"><span class="svelte-11r88ol"> </span> <span class="svelte-11r88ol"> </span></div></div>'),dt=y('<div class="grid gap-4 md:grid-cols-2 svelte-11r88ol"></div>'),vt=y('<div class="text-center py-8 text-gray-500 svelte-11r88ol"><div class="text-4xl mb-2 svelte-11r88ol">⚽</div> <p class="svelte-11r88ol">No live matches found</p> <p class="text-sm svelte-11r88ol">Check back later or try refreshing</p></div>'),ht=y('<div class="space-y-6 svelte-11r88ol"><div class="flex justify-between items-center svelte-11r88ol"><h3 class="text-lg font-semibold text-gray-800 svelte-11r88ol">Live Matches</h3> <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 svelte-11r88ol"> </button></div> <!></div>'),ut=y('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-11r88ol"><div class="flex items-center space-x-3 svelte-11r88ol"><div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center svelte-11r88ol"><span class="text-white font-semibold text-lg svelte-11r88ol">⭐</span></div> <div class="flex-1 svelte-11r88ol"><h4 class="font-semibold text-gray-900 svelte-11r88ol"> </h4> <p class="text-sm text-gray-600 svelte-11r88ol"> </p> <div class="flex items-center justify-between mt-2 svelte-11r88ol"><span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded svelte-11r88ol"> </span> <span class="text-sm font-semibold text-green-600 svelte-11r88ol"> </span></div> <div class="flex items-center justify-between mt-1 text-xs text-gray-500 svelte-11r88ol"><span class="svelte-11r88ol"> </span> <span class="svelte-11r88ol"> </span></div></div></div></div>'),mt=y('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 svelte-11r88ol"></div>'),pt=y('<div class="text-center py-8 text-gray-500 svelte-11r88ol"><div class="text-4xl mb-2 svelte-11r88ol">👥</div> <p class="svelte-11r88ol">No popular players loaded</p> <p class="text-sm svelte-11r88ol">Click refresh to load trending players</p></div>'),ft=y('<div class="space-y-6 svelte-11r88ol"><div class="flex justify-between items-center svelte-11r88ol"><h3 class="text-lg font-semibold text-gray-800 svelte-11r88ol">Popular Players</h3> <button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 svelte-11r88ol"> </button></div> <!></div>'),gt=y('<div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-8 svelte-11r88ol"><div class="flex items-center svelte-11r88ol"><div class="text-red-400 mr-3 svelte-11r88ol"><svg class="w-5 h-5 svelte-11r88ol" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" class="svelte-11r88ol"></path></svg></div> <div class="svelte-11r88ol"><h3 class="text-sm font-medium text-red-800 svelte-11r88ol">Error</h3> <p class="text-sm text-red-700 mt-1 svelte-11r88ol"> </p></div></div></div>'),yt=y('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 svelte-11r88ol"><div class="container mx-auto px-4 max-w-6xl svelte-11r88ol"><div class="text-center mb-8 svelte-11r88ol"><h1 class="text-4xl font-bold text-gray-900 mb-2 svelte-11r88ol">SofaScore API Demo</h1> <p class="text-lg text-gray-600 svelte-11r88ol">Real sports data integration for PickNWin fantasy platform</p></div> <!> <div class="bg-white rounded-lg shadow-md mb-8 svelte-11r88ol"><div class="border-b border-gray-200 svelte-11r88ol"><nav class="flex space-x-8 px-6 svelte-11r88ol"><button>Player Search</button> <button>Live Matches</button> <button>Popular Players</button></nav></div> <div class="p-6 svelte-11r88ol"><!></div></div> <!> <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 svelte-11r88ol"><h3 class="text-lg font-semibold text-blue-900 mb-3 svelte-11r88ol">About This Demo</h3> <div class="text-sm text-blue-800 space-y-2 svelte-11r88ol"><p class="svelte-11r88ol">This demo showcases the integration of the SofaScore API with the PickNWin fantasy sports platform.</p> <p class="svelte-11r88ol"><strong class="svelte-11r88ol">Features demonstrated:</strong></p> <ul class="list-disc list-inside ml-4 space-y-1 svelte-11r88ol"><li class="svelte-11r88ol">Real-time player and team search</li> <li class="svelte-11r88ol">Live match data integration</li> <li class="svelte-11r88ol">Intelligent caching and fallback systems</li> <li class="svelte-11r88ol">Service monitoring and statistics</li> <li class="svelte-11r88ol">Hybrid data sources (mock + real API)</li></ul> <p class="mt-3 svelte-11r88ol"><strong class="svelte-11r88ol">API Source:</strong> SofaScore via RapidAPI</p></div></div></div></div>');function $t($e,e){Ne(e,!1);let t=Z("messi"),a=Z(null),s=Z([]),i=Z([]),c=Z(null),n=Z(!1),u=Z(""),R=Z("search");async function te(){if(l(t).trim()){g(n,!0),g(u,"");try{g(a,await Y.search(l(t),"all"))}catch(v){g(u,`Search failed: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Search error:",v)}finally{g(n,!1)}}}async function ce(){g(n,!0),g(u,"");try{g(s,await le.getLiveMatches())}catch(v){g(u,`Failed to load live matches: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Live matches error:",v)}finally{g(n,!1)}}async function ie(){g(n,!0),g(u,"");try{g(i,await le.searchPlayers("",15))}catch(v){g(u,`Failed to load popular players: ${v instanceof Error?v.message:"Unknown error"}`),console.error("Popular players error:",v)}finally{g(n,!1)}}async function ne(){g(c,le.getStats())}function Le(){le.clearCache(),alert("Cache cleared successfully!"),ne()}function De(){le.resetStats(),ne()}function Ee(v){v.key==="Enter"&&te()}He(()=>{ne(),te()}),Ge();var ve=yt();Oe(v=>{var b=et();We.title="SofaScore API Demo - PickNWin",p(v,b)});var _e=o(ve),we=d(o(_e),2);{var Ie=v=>{var b=st(),I=o(b),q=d(o(I),2),A=o(q),L=d(A,2),V=d(L,2);r(q),r(I);var G=d(I,2),_=o(G),F=o(_),H=o(F,!0);r(F),ae(2),r(_);var N=d(_,2),U=o(N),j=o(U,!0);r(U),ae(2),r(N);var k=d(N,2),X=o(k),z=o(X,!0);r(X),ae(2),r(k);var T=d(k,2),C=o(T),D=o(C);r(C),ae(2),r(T),r(G);var m=d(G,2);{var x=f=>{var w=at(),K=o(w),P=d(o(K)),$=d(P);{var W=S=>{var M=tt(),O=o(M);r(M),E(B=>h(O,`(${B??""})`),[()=>l(c).lastErrorTime.toLocaleTimeString()]),p(S,M)};J($,S=>{l(c).lastErrorTime&&S(W)})}r(K),r(w),E(()=>h(P,` ${l(c).lastError??""} `)),p(f,w)};J(m,f=>{l(c).lastError&&f(x)})}r(b),E(f=>{h(H,l(c).totalRequests),h(j,l(c).cacheHits),h(z,l(c).sofascoreRequests),h(D,`${f??""}ms`)},[()=>Math.round(l(c).averageResponseTime)]),Q("click",A,ne),Q("click",L,Le),Q("click",V,De),p(v,b)};J(we,v=>{l(c)&&v(Ie)})}var he=d(we,2),ue=o(he),Se=o(ue),me=o(Se),pe=d(me,2),Me=d(pe,2);r(Se),r(ue);var ke=d(ue,2),qe=o(ke);{var Ae=v=>{var b=ct(),I=o(b),q=o(I);Je(q);var A=d(q,2),L=o(A,!0);r(A),r(I);var V=d(I,2);{var G=_=>{var F=lt(),H=o(F),N=o(H);r(H);var U=d(H,2);ge(U,5,()=>l(a).results,ye,(j,k)=>{var X=it(),z=o(X);{var T=D=>{const m=Pe(()=>l(k).entity);var x=rt(),f=d(o(x),2),w=o(f),K=o(w,!0);r(w);var P=d(w,2),$=o(P,!0);r(P);var W=d(P,2),S=o(W);r(W);var M=d(W,2),O=d(o(M),2),B=o(O);r(O),r(M),r(f),r(x),E(ee=>{h(K,l(m).name),h($,l(m).team?.name||"No team"),h(S,`${l(m).position||"Unknown position"} • ${l(m).country.name??""}`),h(B,`${ee??""} followers`)},[()=>l(m).userCount.toLocaleString()]),p(D,x)},C=D=>{const m=Pe(()=>l(k).entity);var x=ot(),f=o(x),w=o(f),K=o(w,!0);r(w),r(f);var P=d(f,2),$=o(P),W=o($,!0);r($);var S=d($,2),M=o(S,!0);r(S);var O=d(S,2),B=d(o(O),2),ee=o(B);r(B),r(O),r(P),r(x),E(de=>{Ve(f,`background-color: ${l(m).teamColors.primary??""}`),h(K,l(m).nameCode),h(W,l(m).name),h(M,l(m).country.name),h(ee,`${de??""} followers`)},[()=>l(m).userCount.toLocaleString()]),p(D,x)};J(z,D=>{l(k).type==="player"?D(T):D(C,!1)})}r(X),p(j,X)}),r(U),r(F),E(()=>h(N,`Search Results (${l(a).results.length??""})`)),p(_,F)};J(V,_=>{l(a)&&_(G)})}r(b),E(()=>{A.disabled=l(n),h(L,l(n)?"Searching...":"Search")}),Xe(q,()=>l(t),_=>g(t,_)),Q("keydown",q,Ee),Q("click",A,te),p(v,b)},Fe=v=>{var b=Re(),I=Ce(b);{var q=L=>{var V=ht(),G=o(V),_=d(o(G),2),F=o(_,!0);r(_),r(G);var H=d(G,2);{var N=j=>{var k=dt();ge(k,5,()=>l(s),ye,(X,z)=>{var T=nt(),C=o(T),D=o(C),m=o(D,!0);r(D),ae(2),r(C);var x=d(C,2),f=o(x),w=o(f),K=o(w,!0);r(w),r(f);var P=d(f,4),$=o(P),W=o($,!0);r($),r(P),r(x);var S=d(x,2),M=o(S),O=o(M);r(M);var B=d(M,2),ee=o(B);r(B),r(S),r(T),E(()=>{h(m,l(z).league),h(K,l(z).home),h(W,l(z).away),h(O,`Source: ${l(z).dataSource??""}`),h(ee,`Confidence: ${l(z).confidenceScore??""}%`)}),p(X,T)}),r(k),p(j,k)},U=j=>{var k=vt();p(j,k)};J(H,j=>{l(s).length>0?j(N):j(U,!1)})}r(V),E(()=>{_.disabled=l(n),h(F,l(n)?"Loading...":"Refresh")}),Q("click",_,ce),p(L,V)},A=L=>{var V=Re(),G=Ce(V);{var _=F=>{var H=ft(),N=o(H),U=d(o(N),2),j=o(U,!0);r(U),r(N);var k=d(N,2);{var X=T=>{var C=mt();ge(C,5,()=>l(i),ye,(D,m)=>{var x=ut(),f=o(x),w=d(o(f),2),K=o(w),P=o(K,!0);r(K);var $=d(K,2),W=o($,!0);r($);var S=d($,2),M=o(S),O=o(M,!0);r(M);var B=d(M,2),ee=o(B);r(B),r(S);var de=d(S,2),fe=o(de),Ke=o(fe);r(fe);var Te=d(fe,2),Be=o(Te);r(Te),r(de),r(w),r(f),r(x),E(()=>{h(P,l(m).name),h(W,l(m).team),h(O,l(m).position),h(ee,`${l(m).credits??""} CR`),h(Ke,`Source: ${l(m).dataSource??""}`),h(Be,`${l(m).confidenceScore??""}% confidence`)}),p(D,x)}),r(C),p(T,C)},z=T=>{var C=pt();p(T,C)};J(k,T=>{l(i).length>0?T(X):T(z,!1)})}r(H),E(()=>{U.disabled=l(n),h(j,l(n)?"Loading...":"Refresh")}),Q("click",U,ie),p(F,H)};J(G,F=>{l(R)==="popular"&&F(_)},!0)}p(L,V)};J(I,L=>{l(R)==="live"?L(q):L(A,!1)},!0)}p(v,b)};J(qe,v=>{l(R)==="search"?v(Ae):v(Fe,!1)})}r(ke),r(he);var Ue=d(he,2);{var je=v=>{var b=gt(),I=o(b),q=d(o(I),2),A=d(o(q),2),L=o(A,!0);r(A),r(q),r(I),r(b),E(()=>h(L,l(u))),p(v,b)};J(Ue,v=>{l(u)&&v(je)})}ae(2),r(_e),r(ve),E(()=>{xe(me,1,`py-4 px-1 border-b-2 font-medium text-sm ${l(R)==="search"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-11r88ol"),xe(pe,1,`py-4 px-1 border-b-2 font-medium text-sm ${l(R)==="live"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-11r88ol"),xe(Me,1,`py-4 px-1 border-b-2 font-medium text-sm ${l(R)==="popular"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-11r88ol")}),Q("click",me,()=>g(R,"search")),Q("click",pe,()=>{g(R,"live"),ce()}),Q("click",Me,()=>{g(R,"popular"),ie()}),p($e,ve),ze()}export{$t as component,Pt as universal};
