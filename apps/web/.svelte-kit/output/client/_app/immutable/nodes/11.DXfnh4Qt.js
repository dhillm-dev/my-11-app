import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as Ne}from"../chunks/d-9Q_JcI.js";import{p as Te,l as et,i as Ee,f as b,h as Ie,d as Dt,t as q,c as a,o as f,g as t,a as u,b as Oe,m as _,$ as ze,s as r,j as l,r as e,q as pe,n as Je,e as v,v as xe,k as d}from"../chunks/CC47Dqnt.js";import{i as L}from"../chunks/3oX9xRnt.js";import{e as Zt,i as te}from"../chunks/Bar9hDmN.js";import{b as ue,a as ge,d as Ve,r as ee}from"../chunks/BmFDec73.js";import{s as bt}from"../chunks/CC5kzxMM.js";import{i as qe}from"../chunks/6Z2O6PQy.js";import{a as Ge,s as He}from"../chunks/DLEGmHds.js";import{a as Qe}from"../chunks/uE9PL26s.js";import{A as ft}from"../chunks/BKS5pudM.js";var Xe=b("<option> </option>"),Ze=b("<option> </option>"),ta=b('<div class="p-8 text-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-2 text-gray-600">Loading users...</p></div>'),ea=b('<div class="p-8 text-center"><p class="text-gray-500">No users found</p></div>'),aa=b('<div class="mt-1 flex space-x-1"><button class="text-xs text-green-600 hover:text-green-800">Approve</button> <span class="text-xs text-gray-400">|</span> <button class="text-xs text-red-600 hover:text-red-800">Reject</button></div>'),ra=b('<span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">Banned</span>'),sa=b('<span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Active</span>'),ia=b('<button class="text-red-600 hover:text-red-900">Delete</button>'),oa=b('<tr><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center"><span class="text-sm font-medium text-gray-700"> </span></div></div> <div class="ml-4"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-sm text-gray-500"> </div> <div class="text-xs text-gray-400"> </div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap"><span> </span> <!></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><div class="text-sm font-medium"> </div> <div class="text-xs text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap"><!> <div class="text-xs text-gray-500 mt-1"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex justify-end space-x-2"><button class="text-blue-600 hover:text-blue-900">View</button> <!></div></td></tr>'),da=b('<div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6"><div class="flex items-center justify-between"><div class="text-sm text-gray-700"> </div> <div class="flex space-x-2"><button class="px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50">Previous</button> <span class="px-3 py-1 text-sm"> </span> <button class="px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50">Next</button></div></div></div>'),na=b('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">KYC Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Wallet</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Joined</th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div> <!>',1),la=b('<div class="flex space-x-2"><button class="px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">Approve KYC</button> <button class="px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700">Reject KYC</button></div>'),va=b('<button class="px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">Unban User</button>'),ca=b('<div class="space-y-2"><input type="text" placeholder="Ban reason..." class="w-full px-2 py-1 border border-gray-300 rounded text-xs"/> <button class="px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700">Ban User</button></div>'),pa=b('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-2/3 max-w-4xl shadow-lg rounded-md bg-white"><div class="mt-3"><div class="flex justify-between items-center mb-6"><h3 class="text-lg font-medium text-gray-900">User Details</h3> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-gray-50 p-4 rounded-lg"><h4 class="text-md font-semibold text-gray-900 mb-3">Personal Information</h4> <div class="space-y-2 text-sm"><div><strong>Name:</strong> </div> <div><strong>Email:</strong> </div> <div><strong>Role:</strong> <span class="capitalize"> </span></div> <div><strong>User ID:</strong> </div> <div><strong>Joined:</strong> </div> <div><strong>Last Login:</strong> </div></div></div> <div class="bg-gray-50 p-4 rounded-lg"><h4 class="text-md font-semibold text-gray-900 mb-3">Wallet Summary</h4> <div class="space-y-2 text-sm"><div><strong>Current Balance:</strong> </div> <div><strong>Total Deposits:</strong> </div> <div><strong>Total Withdrawals:</strong> </div> <div><strong>Net Activity:</strong> </div></div></div> <div class="bg-gray-50 p-4 rounded-lg"><h4 class="text-md font-semibold text-gray-900 mb-3">KYC Status</h4> <div class="space-y-3"><div class="flex items-center space-x-2"><span> </span></div> <!></div></div> <div class="bg-gray-50 p-4 rounded-lg"><h4 class="text-md font-semibold text-gray-900 mb-3">Account Status</h4> <div class="space-y-3"><div class="flex items-center space-x-2"><span> </span></div> <!></div></div></div> <div class="flex justify-end pt-6"><button class="px-4 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700">Close</button></div></div></div></div>'),xa=b('<div class="p-6"><div class="flex justify-between items-center mb-6"><div><h1 class="text-2xl font-bold text-gray-900">Users</h1> <p class="text-gray-600">Manage user accounts, KYC status, and wallet information</p></div> <div class="flex space-x-3"><button class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">Export CSV</button></div></div> <div class="bg-white p-4 rounded-lg shadow mb-6"><div class="grid grid-cols-1 md:grid-cols-5 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">Search</label> <input type="text" placeholder="Search name or email..." class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">KYC Status</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"><option>All Statuses</option><!></select></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Role</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"><option>All Roles</option><!></select></div> <div class="flex items-end"><label class="flex items-center"><input type="checkbox" class="mr-2"/> <span class="text-sm font-medium text-gray-700">Show Banned Only</span></label></div> <div class="flex items-end"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800">Clear Filters</button></div></div></div> <div class="bg-white rounded-lg shadow overflow-hidden"><!></div></div> <!>',1);function Aa(me,_e){Te(_e,!1);const Y=()=>He(Qe,"$adminAuthStore",be),[be,fe]=Ge(),at=_(),Rt=_(),Kt=_(),k=_(),yt=_(),rt=_();let ht=_([]),Mt=_(!1),F=_(""),N=_(""),T=_(""),G=_(!1),st=_(!1),o=_(null),wt=_(""),y=_(1),it=20,ye=0;const he=["pending","verified","rejected"],we=["user","admin","moderator","viewer","superadmin"];Ne(()=>{kt()});async function kt(){l(Mt,!0);try{const s=await ft.users.list();s.success&&s.data&&(l(ht,s.data),ye=t(ht).length)}catch(s){console.error("Failed to load users:",s)}finally{l(Mt,!1)}}function ke(s){l(o,s),l(wt,""),l(st,!0)}async function St(s,n){try{await ft.users.updateKyc(s,n==="verified"),kt()}catch(c){console.error("Failed to update KYC status:",c)}}async function ae(s,n,c){try{n?await ft.users.ban(s,c||"No reason provided"):await ft.users.unban(s),l(st,!1),kt()}catch(g){console.error("Failed to update user ban status:",g)}}async function Se(s){if(confirm("Are you sure you want to permanently delete this user? This action cannot be undone."))try{await ft.users.delete(s),kt()}catch(n){console.error("Failed to delete user:",n)}}function $e(){const s=["id,name,email,role,kycStatus,walletBalance,totalDeposits,totalWithdrawals,isBanned,createdAt,lastLoginAt",...t(k).map(p=>`${p.id},${p.name},${p.email},${p.role||"user"},${p.kycStatus},${p.walletBalance},${p.totalDeposits},${p.totalWithdrawals},${p.isBanned},${p.createdAt},${p.lastLoginAt}`)].join(`
`),n=new Blob([s],{type:"text/csv"}),c=URL.createObjectURL(n),g=document.createElement("a");g.href=c,g.download=`users-${new Date().toISOString().split("T")[0]}.csv`,g.click(),URL.revokeObjectURL(c)}function $t(s){return new Date(s).toLocaleDateString()}function re(s){switch(s){case"verified":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function Ae(s){switch(s){case"superadmin":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";case"moderator":return"bg-indigo-100 text-indigo-800";case"viewer":return"bg-gray-100 text-gray-800";default:return"bg-green-100 text-green-800"}}et(()=>Y(),()=>{l(at,Y().permissions.users?.update??!1)}),et(()=>Y(),()=>{l(Rt,Y().permissions.users?.delete??!1)}),et(()=>Y(),()=>{l(Kt,Y().session?.user.role==="superadmin"||Y().session?.user.role==="admin")}),et(()=>(t(ht),t(F),t(N),t(T),t(G)),()=>{l(k,t(ht).filter(s=>{const n=!t(F)||s.name.toLowerCase().includes(t(F).toLowerCase())||s.email.toLowerCase().includes(t(F).toLowerCase()),c=!t(N)||s.kycStatus===t(N),g=!t(T)||s.role===t(T),p=!t(G)||s.isBanned;return n&&c&&g&&(!t(G)||p)}))}),et(()=>(t(k),t(y)),()=>{l(yt,t(k).slice((t(y)-1)*it,t(y)*it))}),et(()=>t(k),()=>{l(rt,Math.ceil(t(k).length/it))}),Ee(),qe();var se=xa();Ie(s=>{ze.title="Users Management - Dream11 Admin"});var Wt=Dt(se),Pt=a(Wt),ie=r(a(Pt),2),Le=a(ie);e(ie),e(Pt);var Yt=r(Pt,2),oe=a(Yt),Ft=a(oe),de=r(a(Ft),2);ee(de),e(Ft);var Nt=r(Ft,2),Tt=r(a(Nt),2);q(()=>{t(N),pe(()=>{})});var Et=a(Tt);Et.value=Et.__value="";var Be=r(Et);Zt(Be,1,()=>he,te,(s,n)=>{var c=Xe(),g=a(c,!0);e(c);var p={};q(()=>{v(g,t(n)),p!==(p=t(n))&&(c.value=(c.__value=t(n))??"")}),u(s,c)}),e(Tt),e(Nt);var It=r(Nt,2),Ot=r(a(It),2);q(()=>{t(T),pe(()=>{})});var zt=a(Ot);zt.value=zt.__value="";var Ue=r(zt);Zt(Ue,1,()=>we,te,(s,n)=>{var c=Ze(),g=a(c,!0);e(c);var p={};q(()=>{v(g,t(n)),p!==(p=t(n))&&(c.value=(c.__value=t(n))??"")}),u(s,c)}),e(Ot),e(It);var Jt=r(It,2),ne=a(Jt),le=a(ne);ee(le),Je(2),e(ne),e(Jt);var ve=r(Jt,2),Ce=a(ve);e(ve),e(oe),e(Yt);var ce=r(Yt,2),je=a(ce);{var De=s=>{var n=ta();u(s,n)},Re=s=>{var n=xe(),c=Dt(n);{var g=j=>{var D=ea();u(j,D)},p=j=>{var D=na(),E=Dt(D),ot=a(E),H=r(a(ot));Zt(H,5,()=>t(yt),te,(I,i)=>{var S=oa(),B=a(S),R=a(B),K=a(R),$=a(K),M=a($),Q=a(M,!0);e(M),e($),e(K);var O=r(K,2),U=a(O),At=a(U,!0);e(U);var z=r(U,2),qt=a(z,!0);e(z);var X=r(z,2),Gt=a(X);e(X),e(O),e(R),e(B);var J=r(B),nt=a(J),Lt=a(nt,!0);e(nt),e(J);var lt=r(J),W=a(lt),Bt=a(W,!0);e(W);var vt=r(W,2);{var ct=x=>{var m=aa(),tt=a(m),_t=r(tt,4);e(m),f("click",tt,()=>St(t(i).id,"verified")),f("click",_t,()=>St(t(i).id,"rejected")),u(x,m)};L(vt,x=>{t(i),t(at),d(()=>t(i).kycStatus==="pending"&&t(at))&&x(ct)})}e(lt);var pt=r(lt),xt=a(pt),Ht=a(xt);e(xt);var ut=r(xt,2),Ut=a(ut);e(ut),e(pt);var V=r(pt),Z=a(V);{var Qt=x=>{var m=ra();u(x,m)},Xt=x=>{var m=sa();u(x,m)};L(Z,x=>{t(i),d(()=>t(i).isBanned)?x(Qt):x(Xt,!1)})}var Ct=r(Z,2),jt=a(Ct);e(Ct),e(V);var gt=r(V),h=a(gt,!0);e(gt);var w=r(gt),C=a(w),P=a(C),mt=r(P,2);{var A=x=>{var m=ia();f("click",m,()=>Se(t(i).id)),u(x,m)};L(mt,x=>{t(Rt),t(i),d(()=>t(Rt)&&t(i).role!=="superadmin")&&x(A)})}e(C),e(w),e(S),q((x,m,tt,_t,We,Pe,Ye,Fe)=>{bt(S,1,`hover:bg-gray-50 ${t(i),d(()=>t(i).isBanned?"bg-red-50":"")??""}`),v(Q,x),v(At,(t(i),d(()=>t(i).name))),v(qt,(t(i),d(()=>t(i).email))),v(Gt,`ID: ${t(i),d(()=>t(i).id)??""}`),bt(nt,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m??""}`),v(Lt,(t(i),d(()=>t(i).role||"user"))),bt(W,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${tt??""}`),v(Bt,(t(i),d(()=>t(i).kycStatus))),v(Ht,`₹${_t??""}`),v(Ut,`↗ ₹${We??""} | ↙ ₹${Pe??""}`),v(jt,`Last: ${Ye??""}`),v(h,Fe)},[()=>(t(i),d(()=>t(i).name.charAt(0).toUpperCase())),()=>(t(i),d(()=>Ae(t(i).role||"user"))),()=>(t(i),d(()=>re(t(i).kycStatus))),()=>(t(i),d(()=>t(i).walletBalance.toLocaleString())),()=>(t(i),d(()=>t(i).totalDeposits.toLocaleString())),()=>(t(i),d(()=>t(i).totalWithdrawals.toLocaleString())),()=>(t(i),d(()=>$t(t(i).lastLoginAt))),()=>(t(i),d(()=>$t(t(i).createdAt)))]),f("click",P,()=>ke(t(i))),u(I,S)}),e(H),e(ot),e(E);var Vt=r(E,2);{var dt=I=>{var i=da(),S=a(i),B=a(S),R=a(B);e(B);var K=r(B,2),$=a(K),M=r($,2),Q=a(M);e(M);var O=r(M,2);e(K),e(S),e(i),q(U=>{v(R,`Showing ${(t(y)-1)*it+1} to ${U??""} of ${t(k),d(()=>t(k).length)??""} results`),$.disabled=t(y)===1,v(Q,`Page ${t(y)??""} of ${t(rt)??""}`),O.disabled=t(y)===t(rt)},[()=>(t(y),t(k),d(()=>Math.min(t(y)*it,t(k).length)))]),f("click",$,()=>l(y,Math.max(1,t(y)-1))),f("click",O,()=>l(y,Math.min(t(rt),t(y)+1))),u(I,i)};L(Vt,I=>{t(rt)>1&&I(dt)})}u(j,D)};L(c,j=>{t(yt),d(()=>t(yt).length===0)?j(g):j(p,!1)},!0)}u(s,n)};L(je,s=>{t(Mt)?s(De):s(Re,!1)})}e(ce),e(Wt);var Ke=r(Wt,2);{var Me=s=>{var n=pa(),c=a(n),g=a(c),p=a(g),j=r(a(p),2);e(p);var D=r(p,2),E=a(D),ot=r(a(E),2),H=a(ot),Vt=r(a(H));e(H);var dt=r(H,2),I=r(a(dt));e(dt);var i=r(dt,2),S=r(a(i),2),B=a(S,!0);e(S),e(i);var R=r(i,2),K=r(a(R));e(R);var $=r(R,2),M=r(a($));e($);var Q=r($,2),O=r(a(Q));e(Q),e(ot),e(E);var U=r(E,2),At=r(a(U),2),z=a(At),qt=r(a(z));e(z);var X=r(z,2),Gt=r(a(X));e(X);var J=r(X,2),nt=r(a(J));e(J);var Lt=r(J,2),lt=r(a(Lt));e(Lt),e(At),e(U);var W=r(U,2),Bt=r(a(W),2),vt=a(Bt),ct=a(vt),pt=a(ct,!0);e(ct),e(vt);var xt=r(vt,2);{var Ht=h=>{var w=la(),C=a(w),P=r(C,2);e(w),f("click",C,()=>t(o)&&St(t(o).id,"verified")),f("click",P,()=>t(o)&&St(t(o).id,"rejected")),u(h,w)};L(xt,h=>{t(o),t(at),d(()=>t(o).kycStatus==="pending"&&t(at))&&h(Ht)})}e(Bt),e(W);var ut=r(W,2),Ut=r(a(ut),2),V=a(Ut),Z=a(V),Qt=a(Z,!0);e(Z),e(V);var Xt=r(V,2);{var Ct=h=>{var w=xe(),C=Dt(w);{var P=A=>{var x=va();f("click",x,()=>t(o)&&ae(t(o).id,!1)),u(A,x)},mt=A=>{var x=ca(),m=a(x);ee(m);var tt=r(m,2);e(x),ue(m,()=>t(wt),_t=>l(wt,_t)),f("click",tt,()=>t(o)&&ae(t(o).id,!0,t(wt))),u(A,x)};L(C,A=>{t(o),d(()=>t(o).isBanned)?A(P):A(mt,!1)})}u(h,w)};L(Xt,h=>{t(Kt),t(o),d(()=>t(Kt)&&t(o).role!=="superadmin")&&h(Ct)})}e(Ut),e(ut),e(D);var jt=r(D,2),gt=a(jt);e(jt),e(g),e(c),e(n),q((h,w,C,P,mt,A,x)=>{v(Vt,` ${t(o),d(()=>t(o).name)??""}`),v(I,` ${t(o),d(()=>t(o).email)??""}`),v(B,(t(o),d(()=>t(o).role||"user"))),v(K,` ${t(o),d(()=>t(o).id)??""}`),v(M,` ${h??""}`),v(O,` ${w??""}`),v(qt,` ₹${C??""}`),v(Gt,` ₹${P??""}`),v(nt,` ₹${mt??""}`),v(lt,` ₹${A??""}`),bt(ct,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x??""}`),v(pt,(t(o),d(()=>t(o).kycStatus))),bt(Z,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t(o),d(()=>t(o).isBanned?"bg-red-100 text-red-800":"bg-green-100 text-green-800")??""}`),v(Qt,(t(o),d(()=>t(o).isBanned?"Banned":"Active")))},[()=>(t(o),d(()=>$t(t(o).createdAt))),()=>(t(o),d(()=>$t(t(o).lastLoginAt))),()=>(t(o),d(()=>t(o).walletBalance.toLocaleString())),()=>(t(o),d(()=>t(o).totalDeposits.toLocaleString())),()=>(t(o),d(()=>t(o).totalWithdrawals.toLocaleString())),()=>(t(o),d(()=>(t(o).totalDeposits-t(o).totalWithdrawals).toLocaleString())),()=>(t(o),d(()=>re(t(o).kycStatus)))]),f("click",j,()=>l(st,!1)),f("click",gt,()=>l(st,!1)),u(s,n)};L(Ke,s=>{t(st)&&t(o)&&s(Me)})}f("click",Le,$e),ue(de,()=>t(F),s=>l(F,s)),ge(Tt,()=>t(N),s=>l(N,s)),ge(Ot,()=>t(T),s=>l(T,s)),Ve(le,()=>t(G),s=>l(G,s)),f("click",Ce,()=>{l(F,""),l(N,""),l(T,""),l(G,!1)}),u(me,se),Oe(),fe()}export{Aa as component};
