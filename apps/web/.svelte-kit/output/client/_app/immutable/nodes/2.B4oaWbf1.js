import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as Fe}from"../chunks/d-9Q_JcI.js";import{F as tt,bd as at,aE as rt,be as st,bf as it,aW as nt,k as g,bg as ot,bh as Re,a6 as lt,ay as dt,a7 as V,p as Ne,l as fe,j as C,m as D,i as Ue,f as z,o as G,bi as ct,c as n,g as r,r as s,s as _,t as K,e as P,a as y,b as Le,d as Q,n as vt,v as te}from"../chunks/CC47Dqnt.js";import{i as O}from"../chunks/3oX9xRnt.js";import{s as pe}from"../chunks/Codb343D.js";import{i as Be}from"../chunks/6Z2O6PQy.js";import{s as se,a as Oe}from"../chunks/DLEGmHds.js";import{p as We}from"../chunks/oII9ccUj.js";import{a as me}from"../chunks/uE9PL26s.js";import{g as H}from"../chunks/D9h6ojiU.js";import{e as Ce,i as Me}from"../chunks/Bar9hDmN.js";import{e as ut,r as ft,b as pt}from"../chunks/BmFDec73.js";import{s as Ee}from"../chunks/CC5kzxMM.js";import{p as mt}from"../chunks/CAA_fk_i.js";import{A as ae}from"../chunks/BKS5pudM.js";const ht=()=>performance.now(),W={tick:i=>requestAnimationFrame(i),now:()=>ht(),tasks:new Set};function De(){const i=W.now();W.tasks.forEach(e=>{e.c(i)||(W.tasks.delete(e),e.f())}),W.tasks.size!==0&&W.tick(De)}function gt(i){let e;return W.tasks.size===0&&W.tick(De),{promise:new Promise(v=>{W.tasks.add(e={c:i,f:v})}),abort(){W.tasks.delete(e)}}}function re(i,e){Re(()=>{i.dispatchEvent(new CustomEvent(e))})}function bt(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const e=i.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(v=>v[0].toUpperCase()+v.slice(1)).join("")}function Te(i){const e={},v=i.split(";");for(const t of v){const[x,k]=t.split(":");if(!x||k===void 0)break;const h=bt(x.trim());e[h]=k.trim()}return e}const _t=i=>i;function je(i,e,v,t){var x=(i&ot)!==0,k="both",h,A=e.inert,F=e.style.overflow,u,f;function w(){return Re(()=>h??=v()(e,t?.()??{},{direction:k}))}var l={is_global:x,in(){e.inert=A,re(e,"introstart"),u=he(e,w(),f,1,()=>{re(e,"introend"),u?.abort(),u=h=void 0,e.style.overflow=F})},out(S){e.inert=!0,re(e,"outrostart"),f=he(e,w(),u,0,()=>{re(e,"outroend"),S?.()})},stop:()=>{u?.abort(),f?.abort()}},p=tt;if((p.transitions??=[]).push(l),at){var b=x;if(!b){for(var d=p.parent;d&&(d.f&rt)!==0;)for(;(d=d.parent)&&(d.f&st)===0;);b=!d||(d.f&it)!==0}b&&nt(()=>{g(()=>l.in())})}}function he(i,e,v,t,x){var k=t===1;if(lt(e)){var h,A=!1;return dt(()=>{if(!A){var S=e({direction:k?"in":"out"});h=he(i,S,v,t,x)}}),{abort:()=>{A=!0,h?.abort()},deactivate:()=>h.deactivate(),reset:()=>h.reset(),t:()=>h.t()}}if(v?.deactivate(),!e?.duration)return x(),{abort:V,deactivate:V,reset:V,t:()=>t};const{delay:F=0,css:u,tick:f,easing:w=_t}=e;var l=[];if(k&&v===void 0&&(f&&f(0,1),u)){var p=Te(u(0,1));l.push(p,p)}var b=()=>1-t,d=i.animate(l,{duration:F,fill:"forwards"});return d.onfinish=()=>{d.cancel();var S=v?.t()??1-t;v?.abort();var M=t-S,N=e.duration*Math.abs(M),J=[];if(N>0){var U=!1;if(u)for(var L=Math.ceil(N/16.666666666666668),I=0;I<=L;I+=1){var X=S+M*w(I/L),Y=Te(u(X,1-X));J.push(Y),U||=Y.overflow==="hidden"}U&&(i.style.overflow="hidden"),b=()=>{var q=d.currentTime;return S+M*w(q/N)},f&&gt(()=>{if(d.playState!=="running")return!1;var q=b();return f(q,1-q),!0})}d=i.animate(J,{duration:N,fill:"forwards"}),d.onfinish=()=>{b=()=>t,f?.(t,1-t),x()}},{abort:()=>{d&&(d.cancel(),d.effect=null,d.onfinish=V)},deactivate:()=>{x=V},reset:()=>{t===0&&f?.(1,0)},t:()=>b()}}function xt(i){const e=i-1;return e*e*e+1}function Pe(i){const e=typeof i=="string"&&i.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[i,"px"]}function ze(i,{delay:e=0,duration:v=400,easing:t=xt,x=0,y:k=0,opacity:h=0}={}){const A=getComputedStyle(i),F=+A.opacity,u=A.transform==="none"?"":A.transform,f=F*(1-h),[w,l]=Pe(x),[p,b]=Pe(k);return{delay:e,duration:v,easing:t,css:(d,S)=>`
			transform: ${u} translate(${(1-d)*w}${l}, ${(1-d)*p}${b});
			opacity: ${F-f*S}`}}var yt=z('<h1 class="text-xl font-bold text-gray-900">Dream11 Admin</h1>'),wt=z('<div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center"><span class="text-white font-bold text-sm">D</span></div>'),kt=z("<span> </span>"),At=z('<a><span class="text-lg mr-3"> </span> <!></a>'),St=z('<div class="flex items-center space-x-3"><div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"><span class="text-sm font-medium text-gray-700"> </span></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-gray-900 truncate"> </p> <p class="text-xs text-gray-500 capitalize"> </p></div></div>'),$t=z('<button class="w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0"><div class="flex items-center space-x-3"><span class="text-xs px-2 py-1 bg-gray-100 rounded capitalize"> </span> <span class="font-medium"> </span></div></button>'),Ct=z('<div class="absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50"></div>'),Mt=z('<div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center"><span class="text-white text-sm font-medium"> </span></div> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',1),Et=z('<p class="font-medium text-gray-900"> </p> <p class="text-sm text-gray-500"> </p> <p class="text-xs text-blue-600 capitalize mt-1"> </p>',1),Tt=z('<div class="absolute right-0 top-full mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50"><div class="p-3 border-b border-gray-100"><!></div> <div class="p-1"><a href="/admin/profile" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded">Profile</a> <button class="w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded">Sign out</button></div></div>'),jt=z('<div class="flex h-screen bg-gray-50"><aside><div class="p-4 border-b border-gray-200"><!></div> <nav class="flex-1 p-4 space-y-2"></nav> <div class="p-4 border-t border-gray-200"><!></div></aside> <div class="flex-1 flex flex-col overflow-hidden"><header class="bg-white border-b border-gray-200 px-6 py-4"><div class="flex items-center justify-between"><div class="flex items-center space-x-4"><button class="p-2 rounded-lg text-gray-500 hover:bg-gray-100"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button> <h2 class="text-xl font-semibold text-gray-900"> </h2></div> <div class="flex items-center space-x-4"><div class="relative"><input id="global-search" type="text" placeholder="Search... (Ctrl+K)" class="w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"/> <svg class="absolute left-3 top-2.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <!></div> <select class="border border-gray-300 rounded px-3 py-1 text-sm"><option>EN</option><option>NL</option></select> <div class="relative"><button class="flex items-center space-x-2 p-2 rounded-lg text-gray-700 hover:bg-gray-100"><!></button> <!></div></div></div></header> <main class="flex-1 overflow-auto p-6"><!></main></div></div>');function Pt(i,e){Ne(e,!1);const v=()=>se(We,"$page",x),t=()=>se(me,"$adminAuthStore",x),[x,k]=Oe(),h=D(),A=D();let F=mt(e,"title",8,"Admin Panel"),u=D(!0),f=D(""),w=D(!1),l=D(!1),p=D([]);const b=[{path:"/admin",label:"Dashboard",icon:"ğŸ“Š",permission:"read:dashboard"},{path:"/admin/contests",label:"Contests",icon:"ğŸ†",permission:"read:contests"},{path:"/admin/matches",label:"Matches",icon:"âš½",permission:"read:matches"},{path:"/admin/players",label:"Players",icon:"ğŸ‘¤",permission:"read:players"},{path:"/admin/users",label:"Users",icon:"ğŸ‘¥",permission:"read:users"},{path:"/admin/wallet",label:"Wallet",icon:"ğŸ’°",permission:"read:wallet"},{path:"/admin/reports",label:"Reports",icon:"ğŸ“ˆ",permission:"read:reports"},{path:"/admin/settings",label:"Settings",icon:"âš™ï¸",permission:"write:settings"}];async function d(){if(r(f).length<2){C(l,!1);return}try{const[a,o,m]=await Promise.all([ae.getContests({search:r(f),limit:3}),ae.getMatches({search:r(f),limit:3}),ae.getUsers({search:r(f),limit:3})]);C(p,[...(a.data?.contests||[]).map(c=>({type:"contest",...c})),...(o.data?.matches||[]).map(c=>({type:"match",...c})),...(m.data?.users||[]).map(c=>({type:"user",...c}))]),C(l,!0)}catch(a){console.error("Search error:",a)}}function S(a){switch(a.type){case"contest":H(`/admin/contests/${a.id}`);break;case"match":H(`/admin/matches/${a.id}`);break;case"user":H(`/admin/users/${a.id}`);break}C(f,""),C(l,!1)}function M(){me.logout(),H("/admin/login")}function N(){C(u,!r(u))}function J(a){(a.ctrlKey||a.metaKey)&&a.key==="k"&&(a.preventDefault(),document.getElementById("global-search")?.focus()),a.key==="Escape"&&(C(l,!1),C(w,!1))}Fe(()=>{ae.init()}),fe(()=>v(),()=>{C(h,v().url.pathname)}),fe(()=>t(),()=>{C(A,b.filter(a=>{const[o,m]=a.permission.split(".");return t().permissions[o]?.[m]||!1}))}),Ue(),Be();var U=jt();G("keydown",ct,J);var L=n(U),I=n(L),X=n(I);{var Y=a=>{var o=yt();y(a,o)},q=a=>{var o=wt();y(a,o)};O(X,a=>{r(u)?a(Y):a(q,!1)})}s(I);var ie=_(I,2);Ce(ie,5,()=>r(A),Me,(a,o)=>{var m=At(),c=n(m),E=n(c,!0);s(c);var T=_(c,2);{var R=$=>{var j=kt(),B=n(j,!0);s(j),K(()=>P(B,(r(o),g(()=>r(o).label)))),y($,j)};O(T,$=>{r(u)&&$(R)})}s(m),K($=>{ut(m,"href",(r(o),g(()=>r(o).path))),Ee(m,1,`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors
						${$??""}`),P(E,(r(o),g(()=>r(o).icon)))},[()=>(r(h),r(o),g(()=>r(h)===r(o).path||r(o).path!=="/admin"&&r(h).startsWith(r(o).path)?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50"))]),y(a,m)}),s(ie);var ge=_(ie,2),Ie=n(ge);{var Ke=a=>{var o=St(),m=n(o),c=n(m),E=n(c,!0);s(c),s(m);var T=_(m,2),R=n(T),$=n(R,!0);s(R);var j=_(R,2),B=n(j,!0);s(j),s(T),s(o),K(ve=>{P(E,ve),P($,(t(),g(()=>t().session.user.name))),P(B,(t(),g(()=>t().session.user.role)))},[()=>(t(),g(()=>t().session.user.name.charAt(0).toUpperCase()))]),y(a,o)};O(Ie,a=>{r(u),t(),g(()=>r(u)&&t().session)&&a(Ke)})}s(ge),s(L);var be=_(L,2),ne=n(be),_e=n(ne),oe=n(_e),xe=n(oe),ye=_(xe,2),qe=n(ye,!0);s(ye),s(oe);var we=_(oe,2),le=n(we),Z=n(le);ft(Z);var Ge=_(Z,4);{var Qe=a=>{var o=Ct();Ce(o,5,()=>r(p),Me,(m,c)=>{var E=$t(),T=n(E),R=n(T),$=n(R,!0);s(R);var j=_(R,2),B=n(j,!0);s(j),s(T),s(E),K(()=>{P($,(r(c),g(()=>r(c).type))),P(B,(r(c),g(()=>r(c).name||r(c).homeTeam+" vs "+r(c).awayTeam||r(c).email)))}),G("click",E,()=>S(r(c))),y(m,E)}),s(o),je(3,o,()=>ze,()=>({y:-10,duration:200})),y(a,o)};O(Ge,a=>{r(l),r(p),g(()=>r(l)&&r(p).length>0)&&a(Qe)})}s(le);var de=_(le,2),ce=n(de);ce.value=ce.__value="en";var ke=_(ce);ke.value=ke.__value="nl",s(de);var Ae=_(de,2),ee=n(Ae),He=n(ee);{var Je=a=>{var o=Mt(),m=Q(o),c=n(m),E=n(c,!0);s(c),s(m),vt(2),K(T=>P(E,T),[()=>(t(),g(()=>t().session.user.name.charAt(0).toUpperCase()))]),y(a,o)};O(He,a=>{t(),g(()=>t().session)&&a(Je)})}s(ee);var Ve=_(ee,2);{var Xe=a=>{var o=Tt(),m=n(o),c=n(m);{var E=$=>{var j=Et(),B=Q(j),ve=n(B,!0);s(B);var ue=_(B,2),Ze=n(ue,!0);s(ue);var $e=_(ue,2),et=n($e,!0);s($e),K(()=>{P(ve,(t(),g(()=>t().session.user.name))),P(Ze,(t(),g(()=>t().session.user.email))),P(et,(t(),g(()=>t().session.user.role)))}),y($,j)};O(c,$=>{t(),g(()=>t().session)&&$(E)})}s(m);var T=_(m,2),R=_(n(T),2);s(T),s(o),G("click",R,M),je(3,o,()=>ze,()=>({y:-10,duration:200})),y(a,o)};O(Ve,a=>{r(w)&&a(Xe)})}s(Ae),s(we),s(_e),s(ne);var Se=_(ne,2),Ye=n(Se);pe(Ye,e,"default",{}),s(Se),s(be),s(U),K(()=>{Ee(L,1,`${r(u)?"w-64":"w-16"} bg-white border-r border-gray-200 transition-all duration-300 flex flex-col`,"svelte-1bs9by8"),P(qe,F())}),G("click",xe,N),pt(Z,()=>r(f),a=>C(f,a)),G("input",Z,d),G("click",ee,()=>C(w,!r(w))),y(i,U),Le(),k()}var zt=z('<div class="min-h-screen bg-gray-50 flex items-center justify-center"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-gray-600">Checking authentication...</p></div></div>');function Vt(i,e){Ne(e,!1);const v=()=>se(We,"$page",x),t=()=>se(me,"$adminAuthStore",x),[x,k]=Oe(),h=D();Fe(()=>{if(v().url.pathname==="/admin/login")return;if(!t().isAuthenticated){H("/admin/login");return}const l=t().session;if(!l||!["superadmin","admin","moderator","viewer"].includes(l.user.role||"")){H("/admin/login");return}});function A(l){const p={"/admin":"Dashboard","/admin/contests":"Contests Management","/admin/matches":"Matches Management","/admin/players":"Players Management","/admin/users":"Users Management","/admin/wallet":"Wallet Management","/admin/reports":"Reports & Analytics","/admin/settings":"System Settings","/admin/login":"Admin Login","/admin/unauthorized":"Unauthorized Access"};if(p[l])return p[l];for(const[b,d]of Object.entries(p))if(l.startsWith(b)&&b!=="/admin")return d;return"Admin Panel"}fe(()=>v(),()=>{C(h,A(v().url.pathname))}),Ue(),Be();var F=te(),u=Q(F);{var f=l=>{var p=te(),b=Q(p);pe(b,e,"default",{}),y(l,p)},w=l=>{var p=te(),b=Q(p);{var d=M=>{Pt(M,{get title(){return r(h)},children:(N,J)=>{var U=te(),L=Q(U);pe(L,e,"default",{}),y(N,U)},$$slots:{default:!0}})},S=M=>{var N=zt();y(M,N)};O(b,M=>{t(),g(()=>t().isAuthenticated)?M(d):M(S,!1)},!0)}y(l,p)};O(u,l=>{v(),g(()=>v().url.pathname==="/admin/login")?l(f):l(w,!1)})}y(i,F),Le(),k()}export{Vt as component};
