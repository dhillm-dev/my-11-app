import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{o as He}from"../chunks/d-9Q_JcI.js";import{p as ze,f,h as Ne,t as q,o as Q,a as y,b as We,$ as Be,s as l,c as r,g as o,m as Y,r as a,n as te,j as m,e as v,v as Re,d as Me,W as Ce}from"../chunks/CC47Dqnt.js";import{i as G}from"../chunks/3oX9xRnt.js";import{e as ye,i as pe}from"../chunks/Bar9hDmN.js";import{r as Ge,b as Oe,c as Ve}from"../chunks/BmFDec73.js";import{s as me}from"../chunks/CC5kzxMM.js";import{i as Xe}from"../chunks/6Z2O6PQy.js";import{f as fe}from"../chunks/Cj4IhdOJ.js";class se{static instance;config;cache=new Map;requestCount=0;lastResetTime=Date.now();constructor(e){this.config=e}static getInstance(e){if(!se.instance){if(!e)throw new Error("SofaScoreAdapter requires configuration on first initialization");se.instance=new se(e)}return se.instance}async search(e,t="all",s=0){const i=`search_${e}_${t}_${s}`,c=this.getFromCache(i);if(c)return c;await this.checkRateLimit();const n=`${this.config.baseUrl}/search?q=${encodeURIComponent(e)}&type=${t}&page=${s}`,h=await this.makeRequest(n);return this.setCache(i,h),h}async getPlayer(e){const t=`player_${e}`,s=this.getFromCache(t);if(s)return s;await this.checkRateLimit();const i=`${this.config.baseUrl}/player/${e}`,c=await this.makeRequest(i);return this.setCache(t,c),c}async getTeam(e){const t=`team_${e}`,s=this.getFromCache(t);if(s)return s;await this.checkRateLimit();const i=`${this.config.baseUrl}/team/${e}`,c=await this.makeRequest(i);return this.setCache(t,c),c}async getMatchesByDate(e){const t=e.toISOString().split("T")[0],s=`matches_${t}`,i=this.getFromCache(s);if(i)return i;await this.checkRateLimit();const c=`${this.config.baseUrl}/sport/football/scheduled-events/${t}`,n=await this.makeRequest(c);return this.setCache(s,n.events||[]),n.events||[]}async getLiveMatches(){const e="live_matches",t=this.getFromCache(e,3e4);if(t)return t;await this.checkRateLimit();const s=`${this.config.baseUrl}/sport/football/events/live`,i=await this.makeRequest(s);return this.setCache(e,i.events||[],3e4),i.events||[]}convertToFeedMatch(e){const t=new Date(e.startTimestamp*1e3),s=this.mapMatchStatus(e.status.code);return{id:`sofa_${e.id}`,matchId:`sofa_${e.id}`,league:e.tournament.name,home:e.homeTeam.name,away:e.awayTeam.name,homeTeam:e.homeTeam.name,awayTeam:e.awayTeam.name,homeTeamLogo:`/logos/sofa_${e.homeTeam.id}.png`,awayTeamLogo:`/logos/sofa_${e.awayTeam.id}.png`,kickoff:t,startTime:t,status:s,popularity:Math.min(100,Math.floor(e.homeTeam.userCount/1e4)),source:"SofaScore",lastUpdated:new Date,venue:`${e.homeTeam.name} Stadium`,lineupStatus:"probable",curationState:"feed_only",auditTrail:[],players:[]}}convertToFeedPlayer(e,t){const s=this.mapPlayerPosition(e.position),i=this.calculatePlayerCredits(e,s);return{id:`sofa_${e.id}`,matchId:t,name:e.name,team:e.team?.name||"Unknown",position:this.mapPositionCode(s),role:s,credits:i,points:0,selectedBy:Math.random()*100,isPlaying:!0,meta:{injuryStatus:"fit",form:Math.random()*10,value:Math.floor(Math.random()*5e7)+1e6}}}async getPopularPlayers(e=20){const t=["messi","ronaldo","mbappe","haaland","neymar","salah","kane","benzema"],s=[];for(const i of t.slice(0,Math.ceil(e/t.length)))try{const n=(await this.search(i,"player",0)).results.filter(h=>h.type==="player").slice(0,3).map(h=>this.convertToFeedPlayer(h.entity,"popular"));s.push(...n)}catch(c){console.warn(`Failed to fetch players for query: ${i}`,c)}return s.slice(0,e)}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,hitRate:0}}async makeRequest(e){try{const t=await fetch(e,{headers:{"X-RapidAPI-Host":"sofascore.p.rapidapi.com","X-RapidAPI-Key":this.config.apiKey,"Content-Type":"application/json"},method:"GET"});if(!t.ok){const s=await t.text();throw console.error(`RapidAPI SofaScore error: ${t.status} ${t.statusText}`,s),new Error(`RapidAPI SofaScore error: ${t.status} ${t.statusText}`)}return t.json()}catch(t){throw console.error("RapidAPI request failed:",t),t}}async checkRateLimit(){const e=Date.now(),t=e-this.lastResetTime;if(t>=6e4&&(this.requestCount=0,this.lastResetTime=e),this.requestCount>=this.config.rateLimit){const s=6e4-t;await new Promise(i=>setTimeout(i,s)),this.requestCount=0,this.lastResetTime=Date.now()}this.requestCount++}getFromCache(e,t){const s=this.cache.get(e);return s&&s.expires>Date.now()?s.data:(s&&this.cache.delete(e),null)}setCache(e,t,s){const i=s||this.config.cacheTtl;this.cache.set(e,{data:t,expires:Date.now()+i})}mapMatchStatus(e){return e===0?"upcoming":e>=1&&e<=6?"live":"completed"}mapPlayerPosition(e){if(!e)return"midfielder";const t=e.toLowerCase();return t.includes("g")||t.includes("keeper")?"goalkeeper":t.includes("d")||t.includes("def")?"defender":t.includes("f")||t.includes("forward")||t.includes("striker")?"forward":"midfielder"}mapPositionCode(e){switch(e){case"goalkeeper":return"GK";case"defender":return"DEF";case"midfielder":return"MID";case"forward":return"FWD"}}calculatePlayerCredits(e,t){const s={goalkeeper:5,defender:6,midfielder:7,forward:8},i=Math.min(2,1+e.userCount/1e6);return Math.round(s[t]*i*10)/10}}const Qe={apiKey:"23eba5e004mshdb855f7e2e9c0c3p13cd89jsn53631ff75549",baseUrl:"https://sofascore.p.rapidapi.com",rateLimit:100,cacheTtl:3e5},Z=se.getInstance(Qe);class ae{static instance;config;stats;cache=new Map;constructor(e={}){this.config={primarySource:"hybrid",fallbackEnabled:!0,cacheEnabled:!0,maxRetries:3,timeoutMs:1e4,...e},this.stats={totalRequests:0,mockRequests:0,sofascoreRequests:0,cacheHits:0,cacheMisses:0,errorCount:0,averageResponseTime:0}}static getInstance(e){return ae.instance||(ae.instance=new ae(e)),ae.instance}async getUpcomingMatches(e,t){const s=Date.now();this.stats.totalRequests++;try{const i=`upcoming_${e.getTime()}_${t.getTime()}`;if(this.config.cacheEnabled){const n=this.getFromCache(i);if(n)return this.stats.cacheHits++,this.updateResponseTime(s),n;this.stats.cacheMisses++}let c=[];switch(this.config.primarySource){case"mock":c=await this.getMockMatches(e,t);break;case"sofascore":c=await this.getSofaScoreMatches(e,t);break;case"hybrid":c=await this.getHybridMatches(e,t);break}return this.config.cacheEnabled&&c.length>0&&this.setCache(i,c,3e5),this.updateResponseTime(s),c}catch(i){if(this.handleError(i),this.updateResponseTime(s),this.config.fallbackEnabled&&this.config.primarySource!=="mock")return console.warn("Falling back to mock data due to error:",i),this.getMockMatches(e,t);throw i}}async getMatchPlayers(e){const t=Date.now();this.stats.totalRequests++;try{const s=`players_${e}`;if(this.config.cacheEnabled){const c=this.getFromCache(s);if(c)return this.stats.cacheHits++,this.updateResponseTime(t),c;this.stats.cacheMisses++}let i=[];return e.startsWith("sofa_")?i=await this.getSofaScorePlayers(e):i=await this.getMockPlayers(e),this.config.cacheEnabled&&i.length>0&&this.setCache(s,i,6e5),this.updateResponseTime(t),i}catch(s){if(this.handleError(s),this.updateResponseTime(t),this.config.fallbackEnabled)return console.warn("Falling back to mock players due to error:",s),this.getMockPlayers(e);throw s}}async searchPlayers(e,t=20){const s=Date.now();this.stats.totalRequests++;try{const i=`search_${e}_${t}`;if(this.config.cacheEnabled){const n=this.getFromCache(i);if(n)return this.stats.cacheHits++,this.updateResponseTime(s),n;this.stats.cacheMisses++}let c=[];if(this.config.primarySource!=="mock")try{c=(await Z.search(e,"player")).results.filter(h=>h.type==="player").slice(0,t).map(h=>this.enhanceSofaScorePlayer(Z.convertToFeedPlayer(h.entity,"search"))),this.stats.sofascoreRequests++}catch(n){console.warn("SofaScore search failed, using mock data:",n)}if(c.length<t){const n=await this.searchMockPlayers(e,t-c.length);c.push(...n)}return this.config.cacheEnabled&&c.length>0&&this.setCache(i,c,6e5),this.updateResponseTime(s),c}catch(i){throw this.handleError(i),this.updateResponseTime(s),i}}async getLiveMatches(){const e=Date.now();this.stats.totalRequests++;try{const t="live_matches",s=this.getFromCache(t,3e4);if(s)return this.stats.cacheHits++,this.updateResponseTime(e),s;this.stats.cacheMisses++;let i=[];if(this.config.primarySource!=="mock")try{i=(await Z.getLiveMatches()).map(n=>this.enhanceSofaScoreMatch(Z.convertToFeedMatch(n))),this.stats.sofascoreRequests++}catch(c){console.warn("SofaScore live matches failed:",c)}return this.config.cacheEnabled&&i.length>0&&this.setCache(t,i,3e4),this.updateResponseTime(e),i}catch(t){return this.handleError(t),this.updateResponseTime(e),[]}}updateConfig(e){this.config={...this.config,...e},e.cacheEnabled||this.cache.clear()}getStats(){return{...this.stats}}clearCache(){this.cache.clear(),Z.clearCache()}resetStats(){this.stats={totalRequests:0,mockRequests:0,sofascoreRequests:0,cacheHits:0,cacheMisses:0,errorCount:0,averageResponseTime:0}}async getMockMatches(e,t){return this.stats.mockRequests++,(await fe.listUpcoming(e,t)).map(i=>this.enhanceMockMatch(i))}async getSofaScoreMatches(e,t){this.stats.sofascoreRequests++;const s=[],i=new Date(e);for(;i<=t;){try{const n=(await Z.getMatchesByDate(i)).map(h=>this.enhanceSofaScoreMatch(Z.convertToFeedMatch(h)));s.push(...n)}catch(c){console.warn(`Failed to get matches for ${i.toISOString()}:`,c)}i.setDate(i.getDate()+1)}return s}async getHybridMatches(e,t){const[s,i]=await Promise.allSettled([this.getMockMatches(e,t),this.getSofaScoreMatches(e,t)]),c=[];if(i.status==="fulfilled"&&c.push(...i.value),s.status==="fulfilled"){const n=s.value.filter(h=>!c.some(O=>this.matchesAreSimilar(h,O)));c.push(...n)}return c.sort((n,h)=>n.kickoff.getTime()-h.kickoff.getTime())}async getMockPlayers(e){return this.stats.mockRequests++,(await fe.getPlayers(e)).map(s=>this.enhanceMockPlayer(s))}async getSofaScorePlayers(e){return this.stats.sofascoreRequests++,[]}async searchMockPlayers(e,t){return this.stats.mockRequests++,(await fe.getPlayers("mock_search")).filter(c=>c.name.toLowerCase().includes(e.toLowerCase())).slice(0,t).map(c=>this.enhanceMockPlayer(c))}enhanceMockMatch(e){return{...e,dataSource:"mock",confidenceScore:85,lastSyncTime:new Date}}enhanceSofaScoreMatch(e){return{...e,dataSource:"sofascore",confidenceScore:95,lastSyncTime:new Date}}enhanceMockPlayer(e){return{...e,dataSource:"mock",confidenceScore:80,lastSyncTime:new Date}}enhanceSofaScorePlayer(e){return{...e,dataSource:"sofascore",confidenceScore:95,lastSyncTime:new Date}}matchesAreSimilar(e,t){const s=Math.abs(e.kickoff.getTime()-t.kickoff.getTime());return(e.home===t.home&&e.away===t.away||e.home===t.away&&e.away===t.home)&&s<36e5}getFromCache(e,t){const s=this.cache.get(e);return s&&s.expires>Date.now()?s.data:(s&&this.cache.delete(e),null)}setCache(e,t,s){this.cache.set(e,{data:t,expires:Date.now()+s,source:this.config.primarySource})}handleError(e){this.stats.errorCount++,this.stats.lastError=e.message,this.stats.lastErrorTime=new Date,console.error("UnifiedFeedService error:",e)}updateResponseTime(e){const t=Date.now()-e;this.stats.averageResponseTime=(this.stats.averageResponseTime*(this.stats.totalRequests-1)+t)/this.stats.totalRequests}}const re=ae.getInstance({primarySource:"hybrid",fallbackEnabled:!0,cacheEnabled:!0,maxRetries:3,timeoutMs:1e4});var Je=f('<meta name="description" content="Demo of SofaScore API integration for real sports data" class="svelte-tdy242"/>'),Ye=f('<span class="text-red-600 svelte-tdy242"> </span>'),Ze=f('<div class="mt-4 p-3 bg-red-50 border border-red-200 rounded svelte-tdy242"><div class="text-sm text-red-800 svelte-tdy242"><strong class="svelte-tdy242">Last Error:</strong> <!></div></div>'),et=f('<div class="bg-white rounded-lg shadow-md p-6 mb-8 svelte-tdy242"><div class="flex justify-between items-center mb-4 svelte-tdy242"><h2 class="text-xl font-semibold text-gray-800 svelte-tdy242">Service Statistics</h2> <div class="space-x-2 svelte-tdy242"><button class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 svelte-tdy242">Refresh</button> <button class="px-3 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-600 svelte-tdy242">Clear Cache</button> <button class="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 svelte-tdy242">Reset Stats</button></div></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 svelte-tdy242"><div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-blue-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">Total Requests</div></div> <div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-green-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">Cache Hits</div></div> <div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-orange-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">SofaScore API</div></div> <div class="text-center svelte-tdy242"><div class="text-2xl font-bold text-purple-600 svelte-tdy242"> </div> <div class="text-sm text-gray-600 svelte-tdy242">Avg Response</div></div></div> <!></div>'),tt=f('<div class="flex items-center space-x-3 svelte-tdy242"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center svelte-tdy242"><span class="text-blue-600 font-semibold text-lg svelte-tdy242">‚öΩ</span></div> <div class="flex-1 svelte-tdy242"><h4 class="font-semibold text-gray-900 svelte-tdy242"> </h4> <p class="text-sm text-gray-600 svelte-tdy242"> </p> <p class="text-xs text-gray-500 svelte-tdy242"> </p> <div class="flex items-center space-x-2 mt-1 svelte-tdy242"><span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded svelte-tdy242">Player</span> <span class="text-xs text-gray-500 svelte-tdy242"> </span></div></div></div>'),st=f('<div class="flex items-center space-x-3 svelte-tdy242"><div class="w-12 h-12 rounded-full flex items-center justify-center svelte-tdy242"><span class="text-white font-semibold text-sm svelte-tdy242"> </span></div> <div class="flex-1 svelte-tdy242"><h4 class="font-semibold text-gray-900 svelte-tdy242"> </h4> <p class="text-sm text-gray-600 svelte-tdy242"> </p> <div class="flex items-center space-x-2 mt-1 svelte-tdy242"><span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded svelte-tdy242">Team</span> <span class="text-xs text-gray-500 svelte-tdy242"> </span></div></div></div>'),at=f('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-tdy242"><!></div>'),rt=f('<div class="space-y-4 svelte-tdy242"><h3 class="text-lg font-semibold text-gray-800 svelte-tdy242"> </h3> <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 svelte-tdy242"></div></div>'),it=f('<div class="space-y-6 svelte-tdy242"><div class="flex space-x-4 svelte-tdy242"><input placeholder="Search for players or teams..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-tdy242"/> <button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed svelte-tdy242"> </button></div> <!></div>'),ot=f('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-tdy242"><div class="flex justify-between items-center mb-2 svelte-tdy242"><span class="text-sm font-medium text-gray-600 svelte-tdy242"> </span> <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full animate-pulse svelte-tdy242">üî¥ LIVE</span></div> <div class="flex justify-between items-center svelte-tdy242"><div class="text-center flex-1 svelte-tdy242"><div class="font-semibold text-gray-900 svelte-tdy242"> </div></div> <div class="text-center px-4 svelte-tdy242"><div class="text-lg font-bold text-gray-800 svelte-tdy242">VS</div></div> <div class="text-center flex-1 svelte-tdy242"><div class="font-semibold text-gray-900 svelte-tdy242"> </div></div></div> <div class="mt-3 flex justify-between items-center text-sm text-gray-600 svelte-tdy242"><span class="svelte-tdy242"> </span> <span class="svelte-tdy242"> </span></div></div>'),ct=f('<div class="grid gap-4 md:grid-cols-2 svelte-tdy242"></div>'),lt=f('<div class="text-center py-8 text-gray-500 svelte-tdy242"><div class="text-4xl mb-2 svelte-tdy242">‚öΩ</div> <p class="svelte-tdy242">No live matches found</p> <p class="text-sm svelte-tdy242">Check back later or try refreshing</p></div>'),nt=f('<div class="space-y-6 svelte-tdy242"><div class="flex justify-between items-center svelte-tdy242"><h3 class="text-lg font-semibold text-gray-800 svelte-tdy242">Live Matches</h3> <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 svelte-tdy242"> </button></div> <!></div>'),dt=f('<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow svelte-tdy242"><div class="flex items-center space-x-3 svelte-tdy242"><div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center svelte-tdy242"><span class="text-white font-semibold text-lg svelte-tdy242">‚≠ê</span></div> <div class="flex-1 svelte-tdy242"><h4 class="font-semibold text-gray-900 svelte-tdy242"> </h4> <p class="text-sm text-gray-600 svelte-tdy242"> </p> <div class="flex items-center justify-between mt-2 svelte-tdy242"><span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded svelte-tdy242"> </span> <span class="text-sm font-semibold text-green-600 svelte-tdy242"> </span></div> <div class="flex items-center justify-between mt-1 text-xs text-gray-500 svelte-tdy242"><span class="svelte-tdy242"> </span> <span class="svelte-tdy242"> </span></div></div></div></div>'),vt=f('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 svelte-tdy242"></div>'),ht=f('<div class="text-center py-8 text-gray-500 svelte-tdy242"><div class="text-4xl mb-2 svelte-tdy242">üë•</div> <p class="svelte-tdy242">No popular players loaded</p> <p class="text-sm svelte-tdy242">Click refresh to load trending players</p></div>'),ut=f('<div class="space-y-6 svelte-tdy242"><div class="flex justify-between items-center svelte-tdy242"><h3 class="text-lg font-semibold text-gray-800 svelte-tdy242">Popular Players</h3> <button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 svelte-tdy242"> </button></div> <!></div>'),yt=f('<div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-8 svelte-tdy242"><div class="flex items-center svelte-tdy242"><div class="text-red-400 mr-3 svelte-tdy242"><svg class="w-5 h-5 svelte-tdy242" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" class="svelte-tdy242"></path></svg></div> <div class="svelte-tdy242"><h3 class="text-sm font-medium text-red-800 svelte-tdy242">Error</h3> <p class="text-sm text-red-700 mt-1 svelte-tdy242"> </p></div></div></div>'),pt=f('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 svelte-tdy242"><div class="container mx-auto px-4 max-w-6xl svelte-tdy242"><div class="text-center mb-8 svelte-tdy242"><h1 class="text-4xl font-bold text-gray-900 mb-2 svelte-tdy242">SofaScore API Demo</h1> <p class="text-lg text-gray-600 svelte-tdy242">Real sports data integration for PickNWin fantasy platform</p></div> <!> <div class="bg-white rounded-lg shadow-md mb-8 svelte-tdy242"><div class="border-b border-gray-200 svelte-tdy242"><nav class="flex space-x-8 px-6 svelte-tdy242"><button>Player Search</button> <button>Live Matches</button> <button>Popular Players</button></nav></div> <div class="p-6 svelte-tdy242"><!></div></div> <!> <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 svelte-tdy242"><h3 class="text-lg font-semibold text-blue-900 mb-3 svelte-tdy242">About This Demo</h3> <div class="text-sm text-blue-800 space-y-2 svelte-tdy242"><p class="svelte-tdy242">This demo showcases the integration of the SofaScore API with the PickNWin fantasy sports platform.</p> <p class="svelte-tdy242"><strong class="svelte-tdy242">Features demonstrated:</strong></p> <ul class="list-disc list-inside ml-4 space-y-1 svelte-tdy242"><li class="svelte-tdy242">Real-time player and team search</li> <li class="svelte-tdy242">Live match data integration</li> <li class="svelte-tdy242">Intelligent caching and fallback systems</li> <li class="svelte-tdy242">Service monitoring and statistics</li> <li class="svelte-tdy242">Hybrid data sources (mock + real API)</li></ul> <p class="mt-3 svelte-tdy242"><strong class="svelte-tdy242">API Source:</strong> SofaScore via RapidAPI</p></div></div></div></div>');function Rt(Pe,e){ze(e,!1);let t=Y("messi"),s=Y(null),i=Y([]),c=Y([]),n=Y(null),h=Y(!1),O=Y(""),J=Y("search");async function ce(){if(o(t).trim()){m(h,!0),m(O,"");try{m(s,await Z.search(o(t),"all"))}catch(d){m(O,`Search failed: ${d instanceof Error?d.message:"Unknown error"}`),console.error("Search error:",d)}finally{m(h,!1)}}}async function ge(){m(h,!0),m(O,"");try{m(i,await re.getLiveMatches())}catch(d){m(O,`Failed to load live matches: ${d instanceof Error?d.message:"Unknown error"}`),console.error("Live matches error:",d)}finally{m(h,!1)}}async function xe(){m(h,!0),m(O,"");try{m(c,await re.searchPlayers("",15))}catch(d){m(O,`Failed to load popular players: ${d instanceof Error?d.message:"Unknown error"}`),console.error("Popular players error:",d)}finally{m(h,!1)}}async function ie(){m(n,re.getStats())}function $e(){re.clearCache(),alert("Cache cleared successfully!"),ie()}function qe(){re.resetStats(),ie()}function Ee(d){d.key==="Enter"&&ce()}He(()=>{ie(),ce()}),Xe();var le=pt();Ne(d=>{var x=Je();Be.title="SofaScore API Demo - PickNWin",y(d,x)});var be=r(le),_e=l(r(be),2);{var De=d=>{var x=et(),E=r(x),D=l(r(E),2),L=r(D),P=l(L,2),V=l(P,2);a(D),a(E);var U=l(E,2),b=r(U),F=r(b),H=r(F,!0);a(F),te(2),a(b);var z=l(b,2),I=r(z),A=r(I,!0);a(I),te(2),a(z);var k=l(z,2),X=r(k),N=r(X,!0);a(X),te(2),a(k);var T=l(k,2),R=r(T),$=r(R);a(R),te(2),a(T),a(U);var u=l(U,2);{var g=p=>{var _=Ze(),j=r(_),M=l(r(j)),C=l(M);{var W=w=>{var S=Ye(),B=r(S);a(S),q(K=>v(B,`(${K??""})`),[()=>o(n).lastErrorTime.toLocaleTimeString()]),y(w,S)};G(C,w=>{o(n).lastErrorTime&&w(W)})}a(j),a(_),q(()=>v(M,` ${o(n).lastError??""} `)),y(p,_)};G(u,p=>{o(n).lastError&&p(g)})}a(x),q(p=>{v(H,o(n).totalRequests),v(A,o(n).cacheHits),v(N,o(n).sofascoreRequests),v($,`${p??""}ms`)},[()=>Math.round(o(n).averageResponseTime)]),Q("click",L,ie),Q("click",P,$e),Q("click",V,qe),y(d,x)};G(_e,d=>{o(n)&&d(De)})}var ne=l(_e,2),de=r(ne),we=r(de),ve=r(we),he=l(ve,2),Se=l(he,2);a(we),a(de);var ke=l(de,2),Le=r(ke);{var Fe=d=>{var x=it(),E=r(x),D=r(E);Ge(D);var L=l(D,2),P=r(L,!0);a(L),a(E);var V=l(E,2);{var U=b=>{var F=rt(),H=r(F),z=r(H);a(H);var I=l(H,2);ye(I,5,()=>o(s).results,pe,(A,k)=>{var X=at(),N=r(X);{var T=$=>{const u=Ce(()=>o(k).entity);var g=tt(),p=l(r(g),2),_=r(p),j=r(_,!0);a(_);var M=l(_,2),C=r(M,!0);a(M);var W=l(M,2),w=r(W);a(W);var S=l(W,2),B=l(r(S),2),K=r(B);a(B),a(S),a(p),a(g),q(ee=>{v(j,o(u).name),v(C,o(u).team?.name||"No team"),v(w,`${o(u).position||"Unknown position"} ‚Ä¢ ${o(u).country.name??""}`),v(K,`${ee??""} followers`)},[()=>o(u).userCount.toLocaleString()]),y($,g)},R=$=>{const u=Ce(()=>o(k).entity);var g=st(),p=r(g),_=r(p),j=r(_,!0);a(_),a(p);var M=l(p,2),C=r(M),W=r(C,!0);a(C);var w=l(C,2),S=r(w,!0);a(w);var B=l(w,2),K=l(r(B),2),ee=r(K);a(K),a(B),a(M),a(g),q(oe=>{Ve(p,`background-color: ${o(u).teamColors.primary??""}`),v(j,o(u).nameCode),v(W,o(u).name),v(S,o(u).country.name),v(ee,`${oe??""} followers`)},[()=>o(u).userCount.toLocaleString()]),y($,g)};G(N,$=>{o(k).type==="player"?$(T):$(R,!1)})}a(X),y(A,X)}),a(I),a(F),q(()=>v(z,`Search Results (${o(s).results.length??""})`)),y(b,F)};G(V,b=>{o(s)&&b(U)})}a(x),q(()=>{L.disabled=o(h),v(P,o(h)?"Searching...":"Search")}),Oe(D,()=>o(t),b=>m(t,b)),Q("keydown",D,Ee),Q("click",L,ce),y(d,x)},Ie=d=>{var x=Re(),E=Me(x);{var D=P=>{var V=nt(),U=r(V),b=l(r(U),2),F=r(b,!0);a(b),a(U);var H=l(U,2);{var z=A=>{var k=ct();ye(k,5,()=>o(i),pe,(X,N)=>{var T=ot(),R=r(T),$=r(R),u=r($,!0);a($),te(2),a(R);var g=l(R,2),p=r(g),_=r(p),j=r(_,!0);a(_),a(p);var M=l(p,4),C=r(M),W=r(C,!0);a(C),a(M),a(g);var w=l(g,2),S=r(w),B=r(S);a(S);var K=l(S,2),ee=r(K);a(K),a(w),a(T),q(()=>{v(u,o(N).league),v(j,o(N).home),v(W,o(N).away),v(B,`Source: ${o(N).dataSource??""}`),v(ee,`Confidence: ${o(N).confidenceScore??""}%`)}),y(X,T)}),a(k),y(A,k)},I=A=>{var k=lt();y(A,k)};G(H,A=>{o(i).length>0?A(z):A(I,!1)})}a(V),q(()=>{b.disabled=o(h),v(F,o(h)?"Loading...":"Refresh")}),Q("click",b,ge),y(P,V)},L=P=>{var V=Re(),U=Me(V);{var b=F=>{var H=ut(),z=r(H),I=l(r(z),2),A=r(I,!0);a(I),a(z);var k=l(z,2);{var X=T=>{var R=vt();ye(R,5,()=>o(c),pe,($,u)=>{var g=dt(),p=r(g),_=l(r(p),2),j=r(_),M=r(j,!0);a(j);var C=l(j,2),W=r(C,!0);a(C);var w=l(C,2),S=r(w),B=r(S,!0);a(S);var K=l(S,2),ee=r(K);a(K),a(w);var oe=l(w,2),ue=r(oe),Ke=r(ue);a(ue);var Te=l(ue,2),Ue=r(Te);a(Te),a(oe),a(_),a(p),a(g),q(()=>{v(M,o(u).name),v(W,o(u).team),v(B,o(u).position),v(ee,`${o(u).credits??""} CR`),v(Ke,`Source: ${o(u).dataSource??""}`),v(Ue,`${o(u).confidenceScore??""}% confidence`)}),y($,g)}),a(R),y(T,R)},N=T=>{var R=ht();y(T,R)};G(k,T=>{o(c).length>0?T(X):T(N,!1)})}a(H),q(()=>{I.disabled=o(h),v(A,o(h)?"Loading...":"Refresh")}),Q("click",I,xe),y(F,H)};G(U,F=>{o(J)==="popular"&&F(b)},!0)}y(P,V)};G(E,P=>{o(J)==="live"?P(D):P(L,!1)},!0)}y(d,x)};G(Le,d=>{o(J)==="search"?d(Fe):d(Ie,!1)})}a(ke),a(ne);var Ae=l(ne,2);{var je=d=>{var x=yt(),E=r(x),D=l(r(E),2),L=l(r(D),2),P=r(L,!0);a(L),a(D),a(E),a(x),q(()=>v(P,o(O))),y(d,x)};G(Ae,d=>{o(O)&&d(je)})}te(2),a(be),a(le),q(()=>{me(ve,1,`py-4 px-1 border-b-2 font-medium text-sm ${o(J)==="search"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-tdy242"),me(he,1,`py-4 px-1 border-b-2 font-medium text-sm ${o(J)==="live"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-tdy242"),me(Se,1,`py-4 px-1 border-b-2 font-medium text-sm ${o(J)==="popular"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,"svelte-tdy242")}),Q("click",ve,()=>m(J,"search")),Q("click",he,()=>{m(J,"live"),ge()}),Q("click",Se,()=>{m(J,"popular"),xe()}),y(Pe,le),We()}export{Rt as component};
